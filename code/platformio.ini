; 全局平台特定优化标志定义
[platformio]
build_flags =
    ; ESP32/ESP8266 特定优化
    esp = \
        -flto ; 链接时优化
        -fno-exceptions ; 禁用C++异常处理
        -fno-rtti ; 禁用运行时类型信息
    
    ; ARM Cortex-M 系列（NRF52, STM32, RP2040）特定优化
    arm = \
        -mcpu=cortex-m4 ; 根据具体芯片调整
        -mthumb ; 使用Thumb指令集
        -flto ; 链接时优化
        -fno-exceptions ; 禁用C++异常处理
        -fno-rtti ; 禁用运行时类型信息

[env:esp32-c3-devkitc-02]
platform = espressif32
board = esp32-c3-devkitc-02
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; 固件大小优化选项 - 适用于所有平台
build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 针对不同平台的条件编译优化
    ; ESP32/ESP8266 特定优化
    ${platformio.build_flags.esp}
    
    ; ARM Cortex-M 系列（NRF52, STM32, RP2040）特定优化
    ${platformio.build_flags.arm}

; 启用固件压缩 - 使用ESP32内置的压缩机制

lib_deps =
    adafruit/Adafruit GFX Library@^1.11.9
    Bodmer/TFT_eSPI@^2.5.43
    ThingPulse/ESP8266 and ESP32 OLED driver for SSD1306 displays@^4.5.1
    adafruit/Adafruit SHT31 Library@^2.2.4
    adafruit/Adafruit SHT21 Library@^2.1.0
    adafruit/Adafruit SHT4x Library@^1.1.0
    adafruit/Adafruit BME280 Library@^2.2.5
    adafruit/Adafruit BME680 Library@^2.0.3
    adafruit/Adafruit HDC1080 Library@^1.3.1
    adafruit/Adafruit HTU21DF Library@^1.1.0
    adafruit/Adafruit Si7021 Library@^1.4.0
    adafruit/Adafruit LPS2X Library@^1.1.3
    adafruit/Adafruit BMP3XX Library@^1.3.4
    adafruit/Adafruit TSL2561 Library@^1.2.4
    adafruit/Adafruit SGP30 Library@^1.3.3
    adafruit/DHT sensor library@^1.4.6
    adafruit/Adafruit Unified Sensor@^1.1.14
    bblanchon/ArduinoJson@^7.2.0
    me-no-dev/ESP Async WebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.4
    mobizt/Firebase ESP Client@^4.4.1
    pla1/ESP32-audioI2S@^2.0.7
    greiman/SdFat@^2.2.2

[env:esp32-s3-devkitc-1]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; 固件大小优化选项 - 适用于所有平台
build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 针对不同平台的条件编译优化
    ; ESP32/ESP8266 特定优化
    ${platformio.build_flags.esp}
    
    ; ARM Cortex-M 系列（NRF52, STM32, RP2040）特定优化
    ${platformio.build_flags.arm}

; 启用固件压缩 - 使用ESP32内置的压缩机制

lib_deps =
    adafruit/Adafruit GFX Library@^1.11.9
    Bodmer/TFT_eSPI@^2.5.43
    ThingPulse/ESP8266 and ESP32 OLED driver for SSD1306 displays@^4.5.1
    adafruit/Adafruit SHT31 Library@^2.2.4
    adafruit/Adafruit SHT21 Library@^2.1.0
    adafruit/Adafruit SHT4x Library@^1.1.0
    adafruit/Adafruit BME280 Library@^2.2.5
    adafruit/Adafruit BME680 Library@^2.0.3
    adafruit/Adafruit HDC1080 Library@^1.3.1
    adafruit/Adafruit HTU21DF Library@^1.1.0
    adafruit/Adafruit Si7021 Library@^1.4.0
    adafruit/Adafruit LPS2X Library@^1.1.3
    adafruit/Adafruit BMP3XX Library@^1.3.4
    adafruit/Adafruit TSL2561 Library@^1.2.4
    adafruit/Adafruit Unified Sensor@^1.1.14
    adafruit/DHT sensor library@^1.4.6
    bblanchon/ArduinoJson@^7.2.0
    me-no-dev/ESP Async WebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.4
    mobizt/Firebase ESP Client@^4.4.1
    pla1/ESP32-audioI2S@^2.0.7
    greiman/SdFat@^2.2.2
    ESP32TFT/TouchScreen@^1.0.0
    bodmer/TFT_eSPI@^2.5.43
    ESP32-CAM/CameraWebServer@^1.0.0

[env:esp32-c6-n4]
platform = espressif32
board = esp32-c6-n4
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; 固件大小优化选项 - 适用于所有平台
build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 针对不同平台的条件编译优化
    ; ESP32/ESP8266 特定优化
    ${platformio.build_flags.esp}
    
    ; ARM Cortex-M 系列（NRF52, STM32, RP2040）特定优化
    ${platformio.build_flags.arm}

; 启用固件压缩 - 使用ESP32内置的压缩机制

lib_deps =
    adafruit/Adafruit GFX Library@^1.11.9
    Bodmer/TFT_eSPI@^2.5.43
    ThingPulse/ESP8266 and ESP32 OLED driver for SSD1306 displays@^4.5.1
    adafruit/Adafruit SHT31 Library@^2.2.4
    adafruit/Adafruit SHT21 Library@^2.1.0
    adafruit/Adafruit SHT4x Library@^1.1.0
    adafruit/Adafruit BME280 Library@^2.2.5
    adafruit/Adafruit BME680 Library@^2.0.3
    adafruit/Adafruit HDC1080 Library@^1.3.1
    adafruit/Adafruit HTU21DF Library@^1.1.0
    adafruit/Adafruit Si7021 Library@^1.4.0
    adafruit/Adafruit LPS2X Library@^1.1.3
    adafruit/Adafruit BMP3XX Library@^1.3.4
    adafruit/Adafruit TSL2561 Library@^1.2.4
    adafruit/Adafruit Unified Sensor@^1.1.14
    adafruit/DHT sensor library@^1.4.6
    bblanchon/ArduinoJson@^7.2.0
    me-no-dev/ESP Async WebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.4
    mobizt/Firebase ESP Client@^4.4.1
    pla1/ESP32-audioI2S@^2.0.7
    greiman/SdFat@^2.2.2

[env:esp32-s2-devkitc-1]
platform = espressif32
board = esp32-s2-devkitc-1
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; 固件大小优化选项 - 适用于所有平台
build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 针对不同平台的条件编译优化
    ; ESP32/ESP8266 特定优化
    ${platformio.build_flags.esp}
    
    ; ARM Cortex-M 系列（NRF52, STM32, RP2040）特定优化
    ${platformio.build_flags.arm}

; 启用固件压缩 - 使用ESP32内置的压缩机制

lib_deps =
    adafruit/Adafruit GFX Library@^1.11.9
    Bodmer/TFT_eSPI@^2.5.43
    ThingPulse/ESP8266 and ESP32 OLED driver for SSD1306 displays@^4.5.1
    adafruit/Adafruit SHT31 Library@^2.2.4
    adafruit/Adafruit SHT21 Library@^2.1.0
    adafruit/Adafruit SHT4x Library@^1.1.0
    adafruit/Adafruit BME280 Library@^2.2.5
    adafruit/Adafruit BME680 Library@^2.0.3
    adafruit/Adafruit HDC1080 Library@^1.3.1
    adafruit/Adafruit HTU21DF Library@^1.1.0
    adafruit/Adafruit Si7021 Library@^1.4.0
    adafruit/Adafruit LPS2X Library@^1.1.3
    adafruit/Adafruit BMP3XX Library@^1.3.4
    adafruit/Adafruit TSL2561 Library@^1.2.4
    adafruit/Adafruit Unified Sensor@^1.1.14
    adafruit/DHT sensor library@^1.4.6
    bblanchon/ArduinoJson@^7.2.0
    me-no-dev/ESP Async WebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.4
    mobizt/Firebase ESP Client@^4.4.1
    pla1/ESP32-audioI2S@^2.0.7
    greiman/SdFat@^2.2.2

[env:esp32-wroom-32]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; 固件大小优化选项 - 适用于所有平台
build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 针对不同平台的条件编译优化
    ; ESP32/ESP8266 特定优化
    ${platformio.build_flags.esp}
    
    ; ARM Cortex-M 系列（NRF52, STM32, RP2040）特定优化
    ${platformio.build_flags.arm}

; 启用固件压缩 - 使用ESP32内置的压缩机制

lib_deps =
    adafruit/Adafruit GFX Library@^1.11.9
    Bodmer/TFT_eSPI@^2.5.43
    ThingPulse/ESP8266 and ESP32 OLED driver for SSD1306 displays@^4.5.1
    adafruit/Adafruit SHT31 Library@^2.2.4
    adafruit/Adafruit SHT21 Library@^2.1.0
    adafruit/Adafruit SHT4x Library@^1.1.0
    adafruit/Adafruit BME280 Library@^2.2.5
    adafruit/Adafruit BME680 Library@^2.0.3
    adafruit/Adafruit HDC1080 Library@^1.3.1
    adafruit/Adafruit HTU21DF Library@^1.1.0
    adafruit/Adafruit Si7021 Library@^1.4.0
    adafruit/Adafruit LPS2X Library@^1.1.3
    adafruit/Adafruit BMP3XX Library@^1.3.4
    adafruit/Adafruit TSL2561 Library@^1.2.4
    adafruit/Adafruit Unified Sensor@^1.1.14
    adafruit/DHT sensor library@^1.4.6
    bblanchon/ArduinoJson@^7.2.0
    me-no-dev/ESP Async WebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.4
    mobizt/Firebase ESP Client@^4.4.1
    pla1/ESP32-audioI2S@^2.0.7
    greiman/SdFat@^2.2.2

[env:esp32-c3-supermini]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; 固件大小优化选项 - 适用于所有平台
build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 针对不同平台的条件编译优化
    ; ESP32/ESP8266 特定优化
    ${platformio.build_flags.esp}
    
    ; ARM Cortex-M 系列（NRF52, STM32, RP2040）特定优化
    ${platformio.build_flags.arm}

; 启用固件压缩 - 使用ESP32内置的压缩机制

lib_deps =
    adafruit/Adafruit GFX Library@^1.11.9
    Bodmer/TFT_eSPI@^2.5.43
    ThingPulse/ESP8266 and ESP32 OLED driver for SSD1306 displays@^4.5.1
    adafruit/Adafruit SHT31 Library@^2.2.4
    adafruit/Adafruit SHT21 Library@^2.1.0
    adafruit/Adafruit SHT4x Library@^1.1.0
    adafruit/Adafruit BME280 Library@^2.2.5
    adafruit/Adafruit BME680 Library@^2.0.3
    adafruit/Adafruit HDC1080 Library@^1.3.1
    adafruit/Adafruit HTU21DF Library@^1.1.0
    adafruit/Adafruit Si7021 Library@^1.4.0
    adafruit/Adafruit LPS2X Library@^1.1.3
    adafruit/Adafruit BMP3XX Library@^1.3.4
    adafruit/Adafruit TSL2561 Library@^1.2.4
    adafruit/Adafruit Unified Sensor@^1.1.14
    adafruit/DHT sensor library@^1.4.6
    bblanchon/ArduinoJson@^7.2.0
    me-no-dev/ESP Async WebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.4
    mobizt/Firebase ESP Client@^4.4.1
    pla1/ESP32-audioI2S@^2.0.7
    greiman/SdFat@^2.2.2

; ESP8266 系列开发板环境配置
[env:nodemcuv2]
platform = espressif8266
board = nodemcuv2
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; 固件大小优化选项 - 适用于所有平台
build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 针对不同平台的条件编译优化
    ; ESP32/ESP8266 特定优化
    ${platformio.build_flags.esp}
    
    ; ARM Cortex-M 系列（NRF52, STM32, RP2040）特定优化
    ${platformio.build_flags.arm}

; ESP8266 开发板通用依赖库
lib_deps =
    adafruit/Adafruit GFX Library@^1.11.9
    ThingPulse/ESP8266 and ESP32 OLED driver for SSD1306 displays@^4.5.1
    adafruit/Adafruit SHT31 Library@^2.2.4
    adafruit/DHT sensor library@^1.4.6
    bblanchon/ArduinoJson@^7.2.0

; NRF52 系列开发板环境配置
[env:nrf52840dk]
platform = nordicnrf52
board = nrf52840dk
framework = arduino
monitor_speed = 115200

; 固件大小优化选项 - 适用于所有平台
build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 针对不同平台的条件编译优化
    ; ESP32/ESP8266 特定优化
    ${platformio.build_flags.esp}
    
    ; ARM Cortex-M 系列（NRF52, STM32, RP2040）特定优化
    ${platformio.build_flags.arm}

; NRF52 开发板通用依赖库
lib_deps =
    adafruit/Adafruit GFX Library@^1.11.9
    ThingPulse/ESP8266 and ESP32 OLED driver for SSD1306 displays@^4.5.1
    adafruit/Adafruit Unified Sensor@^1.1.14
    bblanchon/ArduinoJson@^7.2.0

; STM32 系列开发板环境配置
[env:bluepill_f103c8]
platform = ststm32
board = bluepill_f103c8
framework = arduino
monitor_speed = 115200

; 固件大小优化选项 - 适用于所有平台
build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 针对不同平台的条件编译优化
    ; ESP32/ESP8266 特定优化
    ${platformio.build_flags.esp}
    
    ; ARM Cortex-M 系列（NRF52, STM32, RP2040）特定优化
    ${platformio.build_flags.arm}

; STM32 开发板通用依赖库
lib_deps =
    adafruit/Adafruit GFX Library@^1.11.9
    adafruit/Adafruit Unified Sensor@^1.1.14
    bblanchon/ArduinoJson@^7.2.0

; RP2040 系列开发板环境配置
[env:raspberrypi_pico]
platform = raspberrypi
board = raspberrypi_pico
framework = arduino
monitor_speed = 115200

; 固件大小优化选项 - 适用于所有平台
build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 针对不同平台的条件编译优化
    ; ESP32/ESP8266 特定优化
    ${platformio.build_flags.esp}
    
    ; ARM Cortex-M 系列（NRF52, STM32, RP2040）特定优化
    ${platformio.build_flags.arm}

; RP2040 开发板通用依赖库
lib_deps =
    adafruit/Adafruit GFX Library@^1.11.9
    adafruit/Adafruit Unified Sensor@^1.1.14
    bblanchon/ArduinoJson@^7.2.0