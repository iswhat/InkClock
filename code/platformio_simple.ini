[env:esp32-c3-devkitc-02-simple]
platform = espressif32
board = esp32-c3-devkitc-02
framework = arduino
monitor_speed = 115200
upload_speed = 921600

build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 基本优化，移除可能导致问题的LTO
    -fno-exceptions ; 禁用C++异常处理

; 简化版本，只包含基本库
src_filter = +<main_simple.cpp>

[env:esp32-wroom-32-simple]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600

build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 基本优化，移除可能导致问题的LTO
    -fno-exceptions ; 禁用C++异常处理

; 简化版本，只包含基本库
src_filter = +<main_simple.cpp>

[env:nodemcuv2-simple]
platform = espressif8266
board = nodemcuv2
framework = arduino
monitor_speed = 115200
upload_speed = 115200

build_type = release
build_flags =
    -Os ; 优化大小
    -fdata-sections -ffunction-sections -Wl,--gc-sections ; 移除未使用的代码和数据段
    -fmerge-all-constants ; 合并相同的字符串常量
    
    ; 基本优化，移除可能导致问题的LTO
    -fno-exceptions ; 禁用C++异常处理

; 简化版本，只包含基本库
src_filter = +<main_simple.cpp>