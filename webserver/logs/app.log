[2026-01-15 15:59:15.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-15 15:59:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/sensor"}
[2026-01-15 15:59:15.000000] INFO: API请求 {"request_id":"req_69689e53168cd9.74706140","method":"GET","path":"\/api\/sensor","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-15 15:59:15.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/sensor","path":"\/api\/sensor","query":[],"ip":"::1","headers":{"User-Agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462","Content-Type":"application\/json","Host":"localhost:8000"},"body":"","api_version":"v1"}}
[2026-01-15 15:59:15.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/sensor"}
[2026-01-16 14:45:58.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 14:45:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:45:58.000000] INFO: 路由匹配成功 {"route_pattern":"GET \/api\/gateway\/*","handler":"ApiGatewayController@gateway","matches":["\/api\/gateway\/health"]}
[2026-01-16 14:45:58.000000] INFO: API请求 {"request_id":"req_6969dea6bac364.86119212","method":"GET","path":"\/api\/gateway\/health","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462","api_version":"v1","content_type":"unknown","body":null}
[2026-01-16 14:45:58.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/gateway\/health","path":"\/api\/gateway\/health","query":[],"ip":"::1","headers":{"User-Agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462","Host":"localhost:8000","Connection":"Keep-Alive"},"body":"","api_version":"v1"}}
[2026-01-16 14:45:58.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN type TEXT DEFAULT 'system'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: type","time":0.00038814544677734375}
[2026-01-16 14:45:58.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN status TEXT DEFAULT 'enabled'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: status","time":1.9073486328125e-5}
[2026-01-16 14:45:58.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN author TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: author","time":1.9073486328125e-5}
[2026-01-16 14:45:58.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN version TEXT DEFAULT '1.0.0'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: version","time":2.002716064453125e-5}
[2026-01-16 14:45:58.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN refresh_interval TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: refresh_interval","time":1.9073486328125e-5}
[2026-01-16 14:45:58.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN settings_url TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: settings_url","time":2.5987625122070312e-5}
[2026-01-16 14:45:58.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_by","time":2.9087066650390625e-5}
[2026-01-16 14:45:58.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_at DATETIME DEFAULT CURRENT_TIMESTAMP","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_at","time":2.8133392333984375e-5}
[2026-01-16 14:45:58.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_by","time":2.7894973754882812e-5}
[2026-01-16 14:45:58.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_at DATETIME","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_at","time":1.8835067749023438e-5}
[2026-01-16 14:45:58.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approval_status TEXT DEFAULT 'approved'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approval_status","time":1.7881393432617188e-5}
[2026-01-16 14:45:58.000000] INFO: 数据库连接成功 {"path":"D:\\InkClock\\webserver\\config\/..\/db\/inkclock.db","time":0.10043597221374512}
[2026-01-16 14:51:26.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 14:51:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:51:26.000000] INFO: 路由匹配成功 {"route_pattern":"GET \/api\/gateway\/*","handler":"ApiGatewayController@gateway","matches":["\/api\/gateway\/health"]}
[2026-01-16 14:51:26.000000] INFO: API请求 {"request_id":"req_6969dfee2d1e01.19124674","method":"GET","path":"\/api\/gateway\/health","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462","api_version":"v1","content_type":"unknown","body":null}
[2026-01-16 14:51:26.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/gateway\/health","path":"\/api\/gateway\/health","query":[],"ip":"::1","headers":{"User-Agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462","Host":"localhost:8000","Connection":"Keep-Alive"},"body":"","api_version":"v1"}}
[2026-01-16 14:51:26.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN type TEXT DEFAULT 'system'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: type","time":3.910064697265625e-5}
[2026-01-16 14:51:26.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN status TEXT DEFAULT 'enabled'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: status","time":1.9073486328125e-5}
[2026-01-16 14:51:26.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN author TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: author","time":1.7881393432617188e-5}
[2026-01-16 14:51:26.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN version TEXT DEFAULT '1.0.0'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: version","time":2.8133392333984375e-5}
[2026-01-16 14:51:26.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN refresh_interval TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: refresh_interval","time":2.6941299438476562e-5}
[2026-01-16 14:51:26.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN settings_url TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: settings_url","time":3.0994415283203125e-5}
[2026-01-16 14:51:26.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_by","time":4.38690185546875e-5}
[2026-01-16 14:51:26.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_at DATETIME DEFAULT CURRENT_TIMESTAMP","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_at","time":3.314018249511719e-5}
[2026-01-16 14:51:26.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_by","time":3.695487976074219e-5}
[2026-01-16 14:51:26.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_at DATETIME","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_at","time":3.3855438232421875e-5}
[2026-01-16 14:51:26.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approval_status TEXT DEFAULT 'approved'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approval_status","time":2.09808349609375e-5}
[2026-01-16 14:51:26.000000] INFO: 数据库连接成功 {"path":"D:\\InkClock\\webserver\\config\/..\/db\/inkclock.db","time":0.20515084266662598}
[2026-01-16 14:51:26.000000] INFO: API操作 {"user_id":null,"action":"api_gateway_request","client_ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462"}
[2026-01-16 14:51:26.000000] INFO: API Gateway Request {"path":"\/api\/gateway\/health","api_path":"\/health","api_version":"v1","method":"GET","headers":{"User-Agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462","Host":"localhost:8000","Connection":"Keep-Alive"},"body":"","cache_key":"3043c0e8b0cd54a047b090a48326a15c","trace_id":"ff5eb425ad914e319fb33efbeb877fe4","span_id":"c2fa4ad162f09cc7","parent_span_id":"","sampled":"1","trace_flags":"01"}
[2026-01-16 14:53:47.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 14:53:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/gateway\/health"}
[2026-01-16 14:53:47.000000] INFO: 路由匹配成功 {"route_pattern":"GET \/api\/gateway\/*","handler":"ApiGatewayController@gateway","matches":["\/api\/gateway\/health"]}
[2026-01-16 14:53:47.000000] INFO: API请求 {"request_id":"req_6969e07bdda2b6.38332637","method":"GET","path":"\/api\/gateway\/health","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462","api_version":"v1","content_type":"unknown","body":null}
[2026-01-16 14:53:47.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/gateway\/health","path":"\/api\/gateway\/health","query":[],"ip":"::1","headers":{"User-Agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462","Host":"localhost:8000","Connection":"Keep-Alive"},"body":"","api_version":"v1"}}
[2026-01-16 14:53:47.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN type TEXT DEFAULT 'system'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: type","time":4.696846008300781e-5}
[2026-01-16 14:53:47.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN status TEXT DEFAULT 'enabled'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: status","time":2.5987625122070312e-5}
[2026-01-16 14:53:47.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN author TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: author","time":3.0040740966796875e-5}
[2026-01-16 14:53:47.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN version TEXT DEFAULT '1.0.0'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: version","time":2.5033950805664062e-5}
[2026-01-16 14:53:47.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN refresh_interval TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: refresh_interval","time":2.5033950805664062e-5}
[2026-01-16 14:53:47.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN settings_url TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: settings_url","time":1.7881393432617188e-5}
[2026-01-16 14:53:47.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_by","time":2.4080276489257812e-5}
[2026-01-16 14:53:47.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_at DATETIME DEFAULT CURRENT_TIMESTAMP","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_at","time":0.00012111663818359375}
[2026-01-16 14:53:47.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_by","time":3.3855438232421875e-5}
[2026-01-16 14:53:47.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_at DATETIME","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_at","time":2.7894973754882812e-5}
[2026-01-16 14:53:47.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approval_status TEXT DEFAULT 'approved'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approval_status","time":2.8133392333984375e-5}
[2026-01-16 14:53:47.000000] INFO: 数据库连接成功 {"path":"D:\\InkClock\\webserver\\config\/..\/db\/inkclock.db","time":0.07820510864257812}
[2026-01-16 14:53:48.000000] INFO: API操作 {"user_id":null,"action":"api_gateway_request","client_ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462"}
[2026-01-16 14:53:48.000000] INFO: API Gateway Request {"path":"\/api\/gateway\/health","api_path":"\/health","api_version":"v1","method":"GET","headers":{"User-Agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462","Host":"localhost:8000","Connection":"Keep-Alive"},"body":"","cache_key":"3043c0e8b0cd54a047b090a48326a15c","trace_id":"b67ea3953427f1d7a0a04a4f87a05509","span_id":"ef7c42a7d2ce1873","parent_span_id":"","sampled":"1","trace_flags":"01"}
[2026-01-16 14:53:48.000000] INFO: API操作 {"user_id":null,"action":"health_check","client_ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell\/5.1.26100.7462"}
[2026-01-16 17:19:38.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:19:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:38.000000] INFO: API请求 {"request_id":"req_696a02aa7fbf26.26561093","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:19:38.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"496082555174"},"body":"","api_version":"v1"}}
[2026-01-16 17:19:38.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:19:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:48.000000] INFO: API请求 {"request_id":"req_696a02b4a56aa7.83191247","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:19:48.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"496082555174"},"body":"","api_version":"v1"}}
[2026-01-16 17:19:48.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:19:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:19:58.000000] INFO: API请求 {"request_id":"req_696a02bebe2a96.15721316","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:19:58.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"496082555174"},"body":"","api_version":"v1"}}
[2026-01-16 17:19:58.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:20:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:08.000000] INFO: API请求 {"request_id":"req_696a02c8e33eb5.79613055","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:20:08.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"496082555174"},"body":"","api_version":"v1"}}
[2026-01-16 17:20:08.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:20:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:20:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:19.000000] INFO: API请求 {"request_id":"req_696a02d304c2b9.65621491","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:20:19.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"496082555174"},"body":"","api_version":"v1"}}
[2026-01-16 17:20:19.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:20:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:29.000000] INFO: API请求 {"request_id":"req_696a02dd19eb72.62298296","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:20:29.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"496082555174"},"body":"","api_version":"v1"}}
[2026-01-16 17:20:29.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:20:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:39.000000] INFO: API请求 {"request_id":"req_696a02e738d142.81227371","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:20:39.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"496082555174"},"body":"","api_version":"v1"}}
[2026-01-16 17:20:39.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:20:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:49.000000] INFO: API请求 {"request_id":"req_696a02f150f0f8.28865488","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:20:49.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"496082555174"},"body":"","api_version":"v1"}}
[2026-01-16 17:20:49.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:20:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:20:59.000000] INFO: API请求 {"request_id":"req_696a02fb66b5a5.12084317","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:20:59.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"496082555174"},"body":"","api_version":"v1"}}
[2026-01-16 17:20:59.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:21:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:21:09.000000] INFO: API请求 {"request_id":"req_696a03057f0ec3.92348018","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:21:09.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"496082555174"},"body":"","api_version":"v1"}}
[2026-01-16 17:21:09.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:09.000000] INFO: 路由匹配开始 {"method":"POST","path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/register$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/register","route_path":"\/api\/user\/register","pattern":"\/^\\\/api\\\/user\\\/register$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/login$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/login","route_path":"\/api\/user\/login","pattern":"\/^\\\/api\\\/user\\\/login$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/bind$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/bind","route_path":"\/api\/user\/bind","pattern":"\/^\\\/api\\\/user\\\/bind$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/unbind$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/unbind","route_path":"\/api\/user\/unbind","pattern":"\/^\\\/api\\\/user\\\/unbind$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/first-admin$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/first-admin","route_path":"\/api\/user\/first-admin","pattern":"\/^\\\/api\\\/user\\\/first-admin$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/message","route_path":"\/api\/message","pattern":"\/^\\\/api\\\/message$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/sync$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/message\/{deviceId}\/sync","route_path":"\/api\/message\/{deviceId}\/sync","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/sync$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/add_device$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/group\/add_device","route_path":"\/api\/group\/add_device","pattern":"\/^\\\/api\\\/group\\\/add_device$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/remove_device$\/"}
[2026-01-16 17:22:09.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/group\/remove_device","route_path":"\/api\/group\/remove_device","pattern":"\/^\\\/api\\\/group\\\/remove_device$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/add_device$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/tag\/add_device","route_path":"\/api\/tag\/add_device","pattern":"\/^\\\/api\\\/tag\\\/add_device$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/remove_device$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/tag\/remove_device","route_path":"\/api\/tag\/remove_device","pattern":"\/^\\\/api\\\/tag\\\/remove_device$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/batch_add$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/tag\/batch_add","route_path":"\/api\/tag\/batch_add","pattern":"\/^\\\/api\\\/tag\\\/batch_add$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/batch_remove$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/tag\/batch_remove","route_path":"\/api\/tag\/batch_remove","pattern":"\/^\\\/api\\\/tag\\\/batch_remove$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/add_log$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/push_task\/add_log","route_path":"\/api\/push_task\/add_log","pattern":"\/^\\\/api\\\/push_task\\\/add_log$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/batch_log$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/push_task\/batch_log","route_path":"\/api\/push_task\/batch_log","pattern":"\/^\\\/api\\\/push_task\\\/batch_log$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/publish$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/notification\/publish","route_path":"\/api\/notification\/publish","pattern":"\/^\\\/api\\\/notification\\\/publish$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/external$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/plugin\/external","route_path":"\/api\/plugin\/external","pattern":"\/^\\\/api\\\/plugin\\\/external$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/upload$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/plugin\/upload","route_path":"\/api\/plugin\/upload","pattern":"\/^\\\/api\\\/plugin\\\/upload$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/initialize$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/plugin\/initialize","route_path":"\/api\/plugin\/initialize","pattern":"\/^\\\/api\\\/plugin\\\/initialize$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/init$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/plugin\/init","route_path":"\/api\/plugin\/init","pattern":"\/^\\\/api\\\/plugin\\\/init$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/approve\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/plugin\/approve\/{id}","route_path":"\/api\/plugin\/approve\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/approve\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)\\\/enable\\\/(?P<pluginId>[^\\\/]+)$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","route_path":"\/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)\\\/enable\\\/(?P<pluginId>[^\\\/]+)$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)\\\/disable\\\/(?P<pluginId>[^\\\/]+)$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","route_path":"\/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)\\\/disable\\\/(?P<pluginId>[^\\\/]+)$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings\\\/reset$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/system\/settings\/reset","route_path":"\/api\/system\/settings\/reset","pattern":"\/^\\\/api\\\/system\\\/settings\\\/reset$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/restart$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/system\/restart","route_path":"\/api\/system\/restart","pattern":"\/^\\\/api\\\/system\\\/restart$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/cache\\\/clear$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/system\/cache\/clear","route_path":"\/api\/system\/cache\/clear","pattern":"\/^\\\/api\\\/system\\\/cache\\\/clear$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:22:10.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/bind"}
[2026-01-16 17:22:10.000000] INFO: API请求 {"request_id":"req_696a0342347cb3.53321957","method":"POST","path":"\/api\/device\/bind","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":{"device_code":"507824555329","user_id":"test"}}
[2026-01-16 17:22:10.000000] INFO: 速率限制中间件执行 {"request":{"method":"POST","uri":"\/api\/device\/bind","path":"\/api\/device\/bind","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Content-Length":"50"},"body":"{\"device_code\": \"507824555329\", \"user_id\": \"test\"}","api_version":"v1"}}
[2026-01-16 17:22:10.000000] INFO: 未匹配到路由 {"method":"POST","path":"\/api\/device\/bind"}
[2026-01-16 17:22:12.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:22:12.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:12.000000] INFO: API请求 {"request_id":"req_696a0344d4f093.00704072","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:22:12.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:22:12.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:22:22.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:22.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:22:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:23.000000] INFO: API请求 {"request_id":"req_696a034f0515b2.16989428","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:22:23.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:22:23.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:22:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:33.000000] INFO: API请求 {"request_id":"req_696a03591c7207.65088121","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:22:33.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:22:33.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:22:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:43.000000] INFO: API请求 {"request_id":"req_696a036332ffa3.81331150","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:22:43.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:22:43.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:51.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:22:51.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:22:51.000000] INFO: API请求 {"request_id":"req_696a036b387221.77979735","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-16 17:22:51.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Accept":"*\/*","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"script","Referer":"http:\/\/localhost:8000\/login.html","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-16 17:22:51.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 17:22:53.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:22:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:22:53.000000] INFO: API请求 {"request_id":"req_696a036d4c2e53.07071441","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:22:53.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:22:53.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: API请求 {"request_id":"req_696a03776185f4.47638738","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:23:03.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:23:03.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:03.000000] INFO: 路由匹配开始 {"method":"POST","path":"\/api\/user\/login"}
[2026-01-16 17:23:03.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/register$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/register","route_path":"\/api\/user\/register","pattern":"\/^\\\/api\\\/user\\\/register$\/","request_path":"\/api\/user\/login"}
[2026-01-16 17:23:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/login$\/"}
[2026-01-16 17:23:03.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/login","route_path":"\/api\/user\/login","pattern":"\/^\\\/api\\\/user\\\/login$\/","request_path":"\/api\/user\/login"}
[2026-01-16 17:23:03.000000] INFO: 路由匹配成功 {"route_pattern":"POST \/api\/user\/login","handler":"UserController@login","matches":["\/api\/user\/login"]}
[2026-01-16 17:23:03.000000] INFO: API请求 {"request_id":"req_696a0377b097d7.07937715","method":"POST","path":"\/api\/user\/login","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"application\/json","body":{"username":"test","password":"111111"}}
[2026-01-16 17:23:03.000000] INFO: 速率限制中间件执行 {"request":{"method":"POST","uri":"\/api\/user\/login","path":"\/api\/user\/login","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Content-Length":"39","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","Content-Type":"application\/json","sec-ch-ua-mobile":"?0","Origin":"http:\/\/localhost:8000","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/login.html","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"{\"username\":\"test\",\"password\":\"111111\"}","api_version":"v1"}}
[2026-01-16 17:23:03.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN type TEXT DEFAULT 'system'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: type","time":3.719329833984375e-5}
[2026-01-16 17:23:03.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN status TEXT DEFAULT 'enabled'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: status","time":1.811981201171875e-5}
[2026-01-16 17:23:03.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN author TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: author","time":1.7881393432617188e-5}
[2026-01-16 17:23:03.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN version TEXT DEFAULT '1.0.0'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: version","time":1.6927719116210938e-5}
[2026-01-16 17:23:03.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN refresh_interval TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: refresh_interval","time":1.811981201171875e-5}
[2026-01-16 17:23:03.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN settings_url TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: settings_url","time":2.193450927734375e-5}
[2026-01-16 17:23:03.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_by","time":1.9073486328125e-5}
[2026-01-16 17:23:03.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_at DATETIME DEFAULT CURRENT_TIMESTAMP","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_at","time":1.7881393432617188e-5}
[2026-01-16 17:23:03.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_by","time":1.71661376953125e-5}
[2026-01-16 17:23:03.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_at DATETIME","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_at","time":1.811981201171875e-5}
[2026-01-16 17:23:03.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approval_status TEXT DEFAULT 'approved'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approval_status","time":1.71661376953125e-5}
[2026-01-16 17:23:03.000000] INFO: 数据库连接成功 {"path":"D:\\InkClock\\webserver\\config\/..\/db\/inkclock.db","time":0.04916191101074219}
[2026-01-16 17:23:03.000000] INFO: API操作 {"user_id":null,"action":"user_login","client_ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36"}
[2026-01-16 17:23:03.000000] INFO: 用户登录请求 {"username":"test"}
[2026-01-16 17:23:03.000000] WARNING: 用户登录失败 {"username":"test","error":"数据库操作失败: Unable to prepare statement: 1, no such column: two_factor_enabled"}
[2026-01-16 17:23:13.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: API请求 {"request_id":"req_696a0381793c49.61611894","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:23:13.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:23:13.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:13.000000] INFO: 路由匹配开始 {"method":"POST","path":"\/api\/user\/login"}
[2026-01-16 17:23:13.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/register$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/register","route_path":"\/api\/user\/register","pattern":"\/^\\\/api\\\/user\\\/register$\/","request_path":"\/api\/user\/login"}
[2026-01-16 17:23:13.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/login$\/"}
[2026-01-16 17:23:13.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/login","route_path":"\/api\/user\/login","pattern":"\/^\\\/api\\\/user\\\/login$\/","request_path":"\/api\/user\/login"}
[2026-01-16 17:23:13.000000] INFO: 路由匹配成功 {"route_pattern":"POST \/api\/user\/login","handler":"UserController@login","matches":["\/api\/user\/login"]}
[2026-01-16 17:23:13.000000] INFO: API请求 {"request_id":"req_696a0381d44491.81871469","method":"POST","path":"\/api\/user\/login","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"application\/json","body":{"username":"test","password":"111111"}}
[2026-01-16 17:23:13.000000] INFO: 速率限制中间件执行 {"request":{"method":"POST","uri":"\/api\/user\/login","path":"\/api\/user\/login","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Content-Length":"39","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","Content-Type":"application\/json","sec-ch-ua-mobile":"?0","Origin":"http:\/\/localhost:8000","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/login.html","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"{\"username\":\"test\",\"password\":\"111111\"}","api_version":"v1"}}
[2026-01-16 17:23:13.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN type TEXT DEFAULT 'system'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: type","time":3.504753112792969e-5}
[2026-01-16 17:23:13.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN status TEXT DEFAULT 'enabled'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: status","time":2.09808349609375e-5}
[2026-01-16 17:23:13.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN author TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: author","time":2.002716064453125e-5}
[2026-01-16 17:23:13.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN version TEXT DEFAULT '1.0.0'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: version","time":2.5033950805664062e-5}
[2026-01-16 17:23:13.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN refresh_interval TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: refresh_interval","time":2.193450927734375e-5}
[2026-01-16 17:23:13.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN settings_url TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: settings_url","time":1.9073486328125e-5}
[2026-01-16 17:23:13.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_by","time":1.7881393432617188e-5}
[2026-01-16 17:23:13.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_at DATETIME DEFAULT CURRENT_TIMESTAMP","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_at","time":1.7881393432617188e-5}
[2026-01-16 17:23:13.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_by","time":1.7881393432617188e-5}
[2026-01-16 17:23:13.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_at DATETIME","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_at","time":2.5987625122070312e-5}
[2026-01-16 17:23:13.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approval_status TEXT DEFAULT 'approved'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approval_status","time":1.9073486328125e-5}
[2026-01-16 17:23:13.000000] INFO: 数据库连接成功 {"path":"D:\\InkClock\\webserver\\config\/..\/db\/inkclock.db","time":0.05106616020202637}
[2026-01-16 17:23:13.000000] INFO: API操作 {"user_id":null,"action":"user_login","client_ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36"}
[2026-01-16 17:23:13.000000] INFO: 用户登录请求 {"username":"test"}
[2026-01-16 17:23:13.000000] WARNING: 用户登录失败 {"username":"test","error":"数据库操作失败: Unable to prepare statement: 1, no such column: two_factor_enabled"}
[2026-01-16 17:23:20.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:23:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:20.000000] INFO: API请求 {"request_id":"req_696a0388a18033.60144256","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-16 17:23:20.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/register.html","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-16 17:23:20.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 17:23:23.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:23:23.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:23.000000] INFO: API请求 {"request_id":"req_696a038b9195e9.31758019","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:23:23.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:23:23.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:23:33.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:33.000000] INFO: API请求 {"request_id":"req_696a0395a66580.63536560","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:23:33.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:23:33.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:36.000000] INFO: 路由匹配开始 {"method":"POST","path":"\/api\/user\/register"}
[2026-01-16 17:23:36.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:23:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/register$\/"}
[2026-01-16 17:23:36.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/register","route_path":"\/api\/user\/register","pattern":"\/^\\\/api\\\/user\\\/register$\/","request_path":"\/api\/user\/register"}
[2026-01-16 17:23:36.000000] INFO: 路由匹配成功 {"route_pattern":"POST \/api\/user\/register","handler":"UserController@register","matches":["\/api\/user\/register"]}
[2026-01-16 17:23:36.000000] INFO: API请求 {"request_id":"req_696a0398efc0b1.51393302","method":"POST","path":"\/api\/user\/register","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"application\/json","body":{"username":"test","email":"test@w.com","password":"111111"}}
[2026-01-16 17:23:36.000000] INFO: 速率限制中间件执行 {"request":{"method":"POST","uri":"\/api\/user\/register","path":"\/api\/user\/register","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Content-Length":"60","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","Content-Type":"application\/json","sec-ch-ua-mobile":"?0","Origin":"http:\/\/localhost:8000","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/register.html","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"{\"username\":\"test\",\"email\":\"test@w.com\",\"password\":\"111111\"}","api_version":"v1"}}
[2026-01-16 17:23:37.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN type TEXT DEFAULT 'system'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: type","time":4.291534423828125e-5}
[2026-01-16 17:23:37.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN status TEXT DEFAULT 'enabled'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: status","time":2.09808349609375e-5}
[2026-01-16 17:23:37.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN author TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: author","time":2.3126602172851562e-5}
[2026-01-16 17:23:37.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN version TEXT DEFAULT '1.0.0'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: version","time":2.193450927734375e-5}
[2026-01-16 17:23:37.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN refresh_interval TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: refresh_interval","time":1.8835067749023438e-5}
[2026-01-16 17:23:37.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN settings_url TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: settings_url","time":1.811981201171875e-5}
[2026-01-16 17:23:37.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_by","time":1.9073486328125e-5}
[2026-01-16 17:23:37.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_at DATETIME DEFAULT CURRENT_TIMESTAMP","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_at","time":2.002716064453125e-5}
[2026-01-16 17:23:37.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_by","time":2.193450927734375e-5}
[2026-01-16 17:23:37.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_at DATETIME","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_at","time":1.9073486328125e-5}
[2026-01-16 17:23:37.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approval_status TEXT DEFAULT 'approved'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approval_status","time":2.5987625122070312e-5}
[2026-01-16 17:23:37.000000] INFO: 数据库连接成功 {"path":"D:\\InkClock\\webserver\\config\/..\/db\/inkclock.db","time":0.048401832580566406}
[2026-01-16 17:23:37.000000] INFO: API操作 {"user_id":null,"action":"user_register","client_ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36"}
[2026-01-16 17:23:37.000000] INFO: 用户注册请求 {"username":"test","email":"test@w.com","password":"111111"}
[2026-01-16 17:23:37.000000] WARNING: 用户注册失败 {"username":"test","error":"用户名或邮箱已存在"}
[2026-01-16 17:23:42.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:23:42.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:23:42.000000] INFO: API请求 {"request_id":"req_696a039e282878.92704562","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-16 17:23:42.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/login.html","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-16 17:23:42.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 17:23:43.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:23:43.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:43.000000] INFO: API请求 {"request_id":"req_696a039fc09363.98313721","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:23:43.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:23:43.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:23:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:53.000000] INFO: API请求 {"request_id":"req_696a03a9db1b80.42309648","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:23:53.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:23:53.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:23:54.000000] INFO: 路由匹配开始 {"method":"POST","path":"\/api\/user\/login"}
[2026-01-16 17:23:54.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:23:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/register$\/"}
[2026-01-16 17:23:54.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/register","route_path":"\/api\/user\/register","pattern":"\/^\\\/api\\\/user\\\/register$\/","request_path":"\/api\/user\/login"}
[2026-01-16 17:23:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/login$\/"}
[2026-01-16 17:23:54.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/login","route_path":"\/api\/user\/login","pattern":"\/^\\\/api\\\/user\\\/login$\/","request_path":"\/api\/user\/login"}
[2026-01-16 17:23:54.000000] INFO: 路由匹配成功 {"route_pattern":"POST \/api\/user\/login","handler":"UserController@login","matches":["\/api\/user\/login"]}
[2026-01-16 17:23:54.000000] INFO: API请求 {"request_id":"req_696a03aa335b76.66867567","method":"POST","path":"\/api\/user\/login","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"application\/json","body":{"username":"test","password":"821118"}}
[2026-01-16 17:23:54.000000] INFO: 速率限制中间件执行 {"request":{"method":"POST","uri":"\/api\/user\/login","path":"\/api\/user\/login","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Content-Length":"39","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","Content-Type":"application\/json","sec-ch-ua-mobile":"?0","Origin":"http:\/\/localhost:8000","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/login.html","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"{\"username\":\"test\",\"password\":\"821118\"}","api_version":"v1"}}
[2026-01-16 17:23:54.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN type TEXT DEFAULT 'system'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: type","time":3.600120544433594e-5}
[2026-01-16 17:23:54.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN status TEXT DEFAULT 'enabled'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: status","time":2.8848648071289062e-5}
[2026-01-16 17:23:54.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN author TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: author","time":1.811981201171875e-5}
[2026-01-16 17:23:54.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN version TEXT DEFAULT '1.0.0'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: version","time":2.002716064453125e-5}
[2026-01-16 17:23:54.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN refresh_interval TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: refresh_interval","time":2.002716064453125e-5}
[2026-01-16 17:23:54.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN settings_url TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: settings_url","time":1.8835067749023438e-5}
[2026-01-16 17:23:54.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_by","time":1.9073486328125e-5}
[2026-01-16 17:23:54.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_at DATETIME DEFAULT CURRENT_TIMESTAMP","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_at","time":2.193450927734375e-5}
[2026-01-16 17:23:54.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_by","time":1.9073486328125e-5}
[2026-01-16 17:23:54.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_at DATETIME","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_at","time":1.8835067749023438e-5}
[2026-01-16 17:23:54.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approval_status TEXT DEFAULT 'approved'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approval_status","time":1.811981201171875e-5}
[2026-01-16 17:23:54.000000] INFO: 数据库连接成功 {"path":"D:\\InkClock\\webserver\\config\/..\/db\/inkclock.db","time":0.04982900619506836}
[2026-01-16 17:23:54.000000] INFO: API操作 {"user_id":null,"action":"user_login","client_ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36"}
[2026-01-16 17:23:54.000000] INFO: 用户登录请求 {"username":"test"}
[2026-01-16 17:23:54.000000] WARNING: 用户登录失败 {"username":"test","error":"数据库操作失败: Unable to prepare statement: 1, no such column: two_factor_enabled"}
[2026-01-16 17:24:03.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:03.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:24:03.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:24:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:24:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:24:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:24:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:04.000000] INFO: API请求 {"request_id":"req_696a03b4014a89.66074794","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:24:04.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:24:04.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:24:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:14.000000] INFO: API请求 {"request_id":"req_696a03be1dc2b9.00230227","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:24:14.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:24:14.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:24:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:24.000000] INFO: API请求 {"request_id":"req_696a03c8385b65.82280282","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:24:24.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:24:24.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:24:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:34.000000] INFO: API请求 {"request_id":"req_696a03d2508862.38458556","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:24:34.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:24:34.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:24:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:44.000000] INFO: API请求 {"request_id":"req_696a03dc6a5545.37148108","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:24:44.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:24:44.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:24:54.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:24:54.000000] INFO: API请求 {"request_id":"req_696a03e67f6163.32901950","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:24:54.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:24:54.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:25:04.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:04.000000] INFO: API请求 {"request_id":"req_696a03f0982567.77517290","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:25:04.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:25:04.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:25:14.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:14.000000] INFO: API请求 {"request_id":"req_696a03faae5c31.63303600","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:25:14.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:25:14.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:25:24.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:24.000000] INFO: API请求 {"request_id":"req_696a0404c62e98.99014130","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:25:24.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:25:24.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:25:34.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:34.000000] INFO: API请求 {"request_id":"req_696a040edb6020.26467254","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:25:34.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:25:34.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:25:44.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:44.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:25:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:25:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:25:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:25:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:45.000000] INFO: API请求 {"request_id":"req_696a0419015cb7.31966995","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:25:45.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:25:45.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:25:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:25:55.000000] INFO: API请求 {"request_id":"req_696a042317d927.86972647","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:25:55.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:25:55.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:26:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:05.000000] INFO: API请求 {"request_id":"req_696a042d2c97e2.19068876","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:26:05.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:26:05.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:26:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:15.000000] INFO: API请求 {"request_id":"req_696a04374632b2.19559836","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:26:15.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:26:15.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:26:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:25.000000] INFO: API请求 {"request_id":"req_696a04415e4a87.04663126","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:26:25.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:26:25.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:29.000000] INFO: 路由匹配开始 {"method":"POST","path":"\/api\/user\/login"}
[2026-01-16 17:26:29.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:26:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/register$\/"}
[2026-01-16 17:26:29.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/register","route_path":"\/api\/user\/register","pattern":"\/^\\\/api\\\/user\\\/register$\/","request_path":"\/api\/user\/login"}
[2026-01-16 17:26:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/login$\/"}
[2026-01-16 17:26:29.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/login","route_path":"\/api\/user\/login","pattern":"\/^\\\/api\\\/user\\\/login$\/","request_path":"\/api\/user\/login"}
[2026-01-16 17:26:29.000000] INFO: 路由匹配成功 {"route_pattern":"POST \/api\/user\/login","handler":"UserController@login","matches":["\/api\/user\/login"]}
[2026-01-16 17:26:29.000000] INFO: API请求 {"request_id":"req_696a0445283686.98588407","method":"POST","path":"\/api\/user\/login","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"application\/json","body":{"username":"test","password":"821118"}}
[2026-01-16 17:26:29.000000] INFO: 速率限制中间件执行 {"request":{"method":"POST","uri":"\/api\/user\/login","path":"\/api\/user\/login","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Content-Length":"39","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","Content-Type":"application\/json","sec-ch-ua-mobile":"?0","Origin":"http:\/\/localhost:8000","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/login.html","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"{\"username\":\"test\",\"password\":\"821118\"}","api_version":"v1"}}
[2026-01-16 17:26:29.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN type TEXT DEFAULT 'system'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: type","time":4.982948303222656e-5}
[2026-01-16 17:26:29.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN status TEXT DEFAULT 'enabled'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: status","time":2.5033950805664062e-5}
[2026-01-16 17:26:29.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN author TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: author","time":2.5987625122070312e-5}
[2026-01-16 17:26:29.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN version TEXT DEFAULT '1.0.0'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: version","time":1.9073486328125e-5}
[2026-01-16 17:26:29.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN refresh_interval TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: refresh_interval","time":2.002716064453125e-5}
[2026-01-16 17:26:29.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN settings_url TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: settings_url","time":2.2172927856445312e-5}
[2026-01-16 17:26:29.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_by","time":2.002716064453125e-5}
[2026-01-16 17:26:29.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_at DATETIME DEFAULT CURRENT_TIMESTAMP","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_at","time":2.3126602172851562e-5}
[2026-01-16 17:26:29.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_by","time":1.9073486328125e-5}
[2026-01-16 17:26:29.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_at DATETIME","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_at","time":2.09808349609375e-5}
[2026-01-16 17:26:29.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approval_status TEXT DEFAULT 'approved'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approval_status","time":2.002716064453125e-5}
[2026-01-16 17:26:29.000000] INFO: 数据库连接成功 {"path":"D:\\InkClock\\webserver\\config\/..\/db\/inkclock.db","time":0.09020400047302246}
[2026-01-16 17:26:29.000000] INFO: API操作 {"user_id":null,"action":"user_login","client_ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36"}
[2026-01-16 17:26:29.000000] INFO: 用户登录请求 {"username":"test"}
[2026-01-16 17:26:29.000000] WARNING: 用户登录失败 {"username":"test","error":"用户名或密码错误"}
[2026-01-16 17:26:32.000000] INFO: 路由匹配开始 {"method":"POST","path":"\/api\/user\/login"}
[2026-01-16 17:26:32.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:26:32.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/register$\/"}
[2026-01-16 17:26:32.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/register","route_path":"\/api\/user\/register","pattern":"\/^\\\/api\\\/user\\\/register$\/","request_path":"\/api\/user\/login"}
[2026-01-16 17:26:32.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/login$\/"}
[2026-01-16 17:26:32.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/login","route_path":"\/api\/user\/login","pattern":"\/^\\\/api\\\/user\\\/login$\/","request_path":"\/api\/user\/login"}
[2026-01-16 17:26:32.000000] INFO: 路由匹配成功 {"route_pattern":"POST \/api\/user\/login","handler":"UserController@login","matches":["\/api\/user\/login"]}
[2026-01-16 17:26:32.000000] INFO: API请求 {"request_id":"req_696a044819ce93.91154505","method":"POST","path":"\/api\/user\/login","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"application\/json","body":{"username":"test","password":"821118"}}
[2026-01-16 17:26:32.000000] INFO: 速率限制中间件执行 {"request":{"method":"POST","uri":"\/api\/user\/login","path":"\/api\/user\/login","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Content-Length":"39","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","Content-Type":"application\/json","sec-ch-ua-mobile":"?0","Origin":"http:\/\/localhost:8000","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/login.html","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"{\"username\":\"test\",\"password\":\"821118\"}","api_version":"v1"}}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE users ADD COLUMN two_factor_enabled INTEGER DEFAULT 0","params":[],"error":"Unable to prepare statement: 1, duplicate column name: two_factor_enabled","time":3.695487976074219e-5}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE users ADD COLUMN two_factor_secret TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: two_factor_secret","time":2.002716064453125e-5}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN type TEXT DEFAULT 'system'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: type","time":2.8133392333984375e-5}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN status TEXT DEFAULT 'enabled'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: status","time":3.0994415283203125e-5}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN author TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: author","time":2.002716064453125e-5}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN version TEXT DEFAULT '1.0.0'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: version","time":2.002716064453125e-5}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN refresh_interval TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: refresh_interval","time":2.2172927856445312e-5}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN settings_url TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: settings_url","time":2.193450927734375e-5}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_by","time":1.9073486328125e-5}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_at DATETIME DEFAULT CURRENT_TIMESTAMP","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_at","time":2.002716064453125e-5}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_by","time":2.288818359375e-5}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_at DATETIME","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_at","time":2.4080276489257812e-5}
[2026-01-16 17:26:32.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approval_status TEXT DEFAULT 'approved'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approval_status","time":2.002716064453125e-5}
[2026-01-16 17:26:32.000000] INFO: 数据库连接成功 {"path":"D:\\InkClock\\webserver\\config\/..\/db\/inkclock.db","time":0.05882692337036133}
[2026-01-16 17:26:32.000000] INFO: API操作 {"user_id":null,"action":"user_login","client_ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36"}
[2026-01-16 17:26:32.000000] INFO: 用户登录请求 {"username":"test"}
[2026-01-16 17:26:32.000000] WARNING: 用户登录失败 {"username":"test","error":"用户名或密码错误"}
[2026-01-16 17:26:35.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:26:35.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:35.000000] INFO: API请求 {"request_id":"req_696a044b7ada42.32261230","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:26:35.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:26:35.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:38.000000] INFO: 路由匹配开始 {"method":"POST","path":"\/api\/user\/login"}
[2026-01-16 17:26:38.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/register$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/register","route_path":"\/api\/user\/register","pattern":"\/^\\\/api\\\/user\\\/register$\/","request_path":"\/api\/user\/login"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/login$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"POST \/api\/user\/login","route_path":"\/api\/user\/login","pattern":"\/^\\\/api\\\/user\\\/login$\/","request_path":"\/api\/user\/login"}
[2026-01-16 17:26:38.000000] INFO: 路由匹配成功 {"route_pattern":"POST \/api\/user\/login","handler":"UserController@login","matches":["\/api\/user\/login"]}
[2026-01-16 17:26:38.000000] INFO: API请求 {"request_id":"req_696a044e589583.96989667","method":"POST","path":"\/api\/user\/login","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"application\/json","body":{"username":"test","password":"111111"}}
[2026-01-16 17:26:38.000000] INFO: 速率限制中间件执行 {"request":{"method":"POST","uri":"\/api\/user\/login","path":"\/api\/user\/login","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Content-Length":"39","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","Content-Type":"application\/json","sec-ch-ua-mobile":"?0","Origin":"http:\/\/localhost:8000","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/login.html","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"{\"username\":\"test\",\"password\":\"111111\"}","api_version":"v1"}}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE users ADD COLUMN two_factor_enabled INTEGER DEFAULT 0","params":[],"error":"Unable to prepare statement: 1, duplicate column name: two_factor_enabled","time":3.695487976074219e-5}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE users ADD COLUMN two_factor_secret TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: two_factor_secret","time":3.409385681152344e-5}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN type TEXT DEFAULT 'system'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: type","time":2.5033950805664062e-5}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN status TEXT DEFAULT 'enabled'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: status","time":2.288818359375e-5}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN author TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: author","time":1.8835067749023438e-5}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN version TEXT DEFAULT '1.0.0'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: version","time":3.3855438232421875e-5}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN refresh_interval TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: refresh_interval","time":2.002716064453125e-5}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN settings_url TEXT","params":[],"error":"Unable to prepare statement: 1, duplicate column name: settings_url","time":2.002716064453125e-5}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_by","time":1.9073486328125e-5}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN created_at DATETIME DEFAULT CURRENT_TIMESTAMP","params":[],"error":"Unable to prepare statement: 1, duplicate column name: created_at","time":2.5987625122070312e-5}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_by INTEGER","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_by","time":2.5987625122070312e-5}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approved_at DATETIME","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approved_at","time":2.5987625122070312e-5}
[2026-01-16 17:26:38.000000] WARNING: 数据库执行警告（忽略） {"sql":"ALTER TABLE plugins ADD COLUMN approval_status TEXT DEFAULT 'approved'","params":[],"error":"Unable to prepare statement: 1, duplicate column name: approval_status","time":2.5987625122070312e-5}
[2026-01-16 17:26:38.000000] INFO: 数据库连接成功 {"path":"D:\\InkClock\\webserver\\config\/..\/db\/inkclock.db","time":0.05758309364318848}
[2026-01-16 17:26:38.000000] INFO: API操作 {"user_id":null,"action":"user_login","client_ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36"}
[2026-01-16 17:26:38.000000] INFO: 用户登录请求 {"username":"test"}
[2026-01-16 17:26:38.000000] INFO: 用户登录成功 {"username":"test"}
[2026-01-16 17:26:38.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:26:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:26:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:39.000000] INFO: API请求 {"request_id":"req_696a044f0b36e3.15492865","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-16 17:26:39.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/dashboard.html","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-16 17:26:39.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 17:26:45.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:26:45.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:45.000000] INFO: API请求 {"request_id":"req_696a04559698c2.19468841","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:26:45.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:26:45.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: API请求 {"request_id":"req_696a045fa47be1.11175641","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-16 17:26:55.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/dashboard.html?ide_webview_request_time=1768555615411","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-16 17:26:55.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 17:26:55.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:26:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:26:55.000000] INFO: API请求 {"request_id":"req_696a045fbb03e9.83334125","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:26:55.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:26:55.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:27:05.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:05.000000] INFO: API请求 {"request_id":"req_696a0469d152f0.57696064","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:27:05.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:27:05.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:27:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:15.000000] INFO: API请求 {"request_id":"req_696a0473e8e655.82413082","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:27:15.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:27:15.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:25.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:25.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:27:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:27:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:27:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:27:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:27:26.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:26.000000] INFO: API请求 {"request_id":"req_696a047e0df3e5.22210024","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:27:26.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:27:26.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:27:36.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:36.000000] INFO: API请求 {"request_id":"req_696a048822d853.62686339","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:27:36.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:27:36.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:27:46.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:46.000000] INFO: API请求 {"request_id":"req_696a04923b1dc7.03316006","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:27:46.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:27:46.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:27:47.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:47.000000] INFO: API请求 {"request_id":"req_696a0493cf8518.87258226","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:27:47.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:27:47.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:55.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:27:55.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: API请求 {"request_id":"req_696a049c00c540.55863943","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:27:56.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:27:56.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:27:56.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:56.000000] INFO: API请求 {"request_id":"req_696a049cc12c50.73425837","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:27:56.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:27:56.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:57.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:27:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:27:58.000000] INFO: API请求 {"request_id":"req_696a049e44cd40.29027121","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:27:58.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:27:58.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:28:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:08.000000] INFO: API请求 {"request_id":"req_696a04a85f0ee9.56336733","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:28:08.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:28:08.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:28:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:18.000000] INFO: API请求 {"request_id":"req_696a04b279a664.91063255","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:28:18.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:28:18.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:28:28.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:28.000000] INFO: API请求 {"request_id":"req_696a04bc8f1587.67839222","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:28:28.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:28:28.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:28:38.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:38.000000] INFO: API请求 {"request_id":"req_696a04c6a86813.22858235","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:28:38.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:28:38.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:28:48.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:48.000000] INFO: API请求 {"request_id":"req_696a04d0bc93f3.30941525","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:28:48.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:28:48.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:53.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:28:53.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-16 17:28:53.000000] INFO: API请求 {"request_id":"req_696a04d545cb42.20814228","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-16 17:28:53.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/dashboard.html?ide_webview_request_time=1768555733096","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-16 17:28:53.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 17:28:58.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:28:58.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:28:58.000000] INFO: API请求 {"request_id":"req_696a04dad4dc70.01863023","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:28:58.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:28:58.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:29:08.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:08.000000] INFO: API请求 {"request_id":"req_696a04e4ebedd0.87362037","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:29:08.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:29:08.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:18.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:18.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:29:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:29:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:29:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:29:18.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:18.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:29:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:19.000000] INFO: API请求 {"request_id":"req_696a04ef100f30.70574193","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:29:19.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:29:19.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:29:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:29.000000] INFO: API请求 {"request_id":"req_696a04f92c7fd8.94205739","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:29:29.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:29:29.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:29:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:39.000000] INFO: API请求 {"request_id":"req_696a05034a14f4.20384873","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:29:39.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:29:39.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:29:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:49.000000] INFO: API请求 {"request_id":"req_696a050d642834.28241129","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:29:49.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:29:49.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:29:59.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:29:59.000000] INFO: API请求 {"request_id":"req_696a0517801a04.98624034","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:29:59.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:29:59.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:30:09.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:09.000000] INFO: API请求 {"request_id":"req_696a052199c043.11105139","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:30:09.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:30:09.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:30:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:19.000000] INFO: API请求 {"request_id":"req_696a052bb1dbe9.81134806","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:30:19.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:30:19.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:30:29.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:29.000000] INFO: API请求 {"request_id":"req_696a0535c93d73.15146464","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:30:29.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:30:29.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:30:39.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:39.000000] INFO: API请求 {"request_id":"req_696a053fe66354.48656878","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:30:39.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:30:39.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:49.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:49.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:30:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:30:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:30:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:30:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:30:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:30:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:30:49.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:49.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:30:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:30:50.000000] INFO: API请求 {"request_id":"req_696a054a0e06c3.54864528","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:30:50.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:30:50.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:31:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:00.000000] INFO: API请求 {"request_id":"req_696a055424d817.99076119","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:31:00.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:31:00.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:31:10.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:10.000000] INFO: API请求 {"request_id":"req_696a055e3cd447.79236170","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:31:10.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:31:10.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:31:20.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:20.000000] INFO: API请求 {"request_id":"req_696a056854f3d6.51477150","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:31:20.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:31:20.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:31:30.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:30.000000] INFO: API请求 {"request_id":"req_696a0572698e44.87079936","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:31:30.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:31:30.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:31:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:40.000000] INFO: API请求 {"request_id":"req_696a057c7fa3e0.05146918","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:31:40.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:31:40.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:31:50.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:31:50.000000] INFO: API请求 {"request_id":"req_696a058694ede9.28238632","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:31:50.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:31:50.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 17:32:00.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/api\/device\/message\/list"}
[2026-01-16 17:32:00.000000] INFO: API请求 {"request_id":"req_696a0590af9fc2.24073004","method":"GET","path":"\/api\/device\/message\/list","query":[],"ip":"::1","user_agent":"python-requests\/2.32.5","api_version":"v1","content_type":"application\/json","body":null}
[2026-01-16 17:32:00.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/api\/device\/message\/list","path":"\/api\/device\/message\/list","query":[],"ip":"::1","headers":{"Host":"localhost:8000","User-Agent":"python-requests\/2.32.5","Accept-Encoding":"gzip, deflate, zstd","Accept":"*\/*","Connection":"keep-alive","Content-Type":"application\/json","Device-Code":"507824555329"},"body":"","api_version":"v1"}}
[2026-01-16 17:32:00.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/api\/device\/message\/list"}
[2026-01-16 18:17:52.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-16 18:17:52.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-16 18:17:52.000000] INFO: API请求 {"request_id":"req_696a10502499e7.16659066","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-16 18:17:52.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/dashboard.html?ide_webview_request_time=1768558671614","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-16 18:17:52.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
[2026-01-22 10:15:18.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-22 10:15:19.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:19.000000] INFO: API请求 {"request_id":"req_69718837a74f45.39727019","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-22 10:15:19.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/dashboard.html?ide_webview_request_time=1769048078529","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-22 10:15:19.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-22 10:15:40.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:15:40.000000] INFO: API请求 {"request_id":"req_6971884ccd6e11.62340709","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-22 10:15:40.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/dashboard.html?ide_webview_request_time=1769048140365","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-22 10:15:40.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-22 10:16:15.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:16:15.000000] INFO: API请求 {"request_id":"req_6971886f76a076.91649823","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-22 10:16:15.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Accept":"*\/*","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"script","Referer":"http:\/\/localhost:8000\/dashboard.html?ide_webview_request_time=1769048140365","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-22 10:16:15.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-22 10:20:06.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:06.000000] INFO: API请求 {"request_id":"req_6971895660e205.89110892","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-22 10:20:06.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/dashboard.html?ide_webview_request_time=1769048406070","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-22 10:20:06.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-22 10:20:25.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:25.000000] INFO: API请求 {"request_id":"req_69718969b05fe6.71881720","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-22 10:20:25.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/dashboard.html?ide_webview_request_time=1769048424865","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-22 10:20:25.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 路由匹配开始 {"method":"GET","path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 所有路由 {"routes":["POST \/api\/user\/register","POST \/api\/user\/login","GET \/api\/user\/info","GET \/api\/user\/devices","POST \/api\/user\/bind","POST \/api\/user\/unbind","PUT \/api\/user\/device","GET \/api\/user\/exist","POST \/api\/user\/first-admin","GET \/api\/user","POST \/api\/user","GET \/api\/user\/stats","GET \/api\/user\/{id}","PUT \/api\/user\/{id}","DELETE \/api\/user\/{id}","POST \/api\/device","GET \/api\/device","GET \/api\/device\/{id}","DELETE \/api\/device\/{id}","POST \/api\/message","GET \/api\/message\/{deviceId}","GET \/api\/message\/{deviceId}\/unread","PUT \/api\/message\/{deviceId}\/read","DELETE \/api\/message\/{deviceId}\/{messageId}","POST \/api\/message\/{deviceId}\/sync","GET \/api\/message\/{deviceId}\/pending","POST \/api\/firmware","GET \/api\/firmware","GET \/api\/firmware\/active\/{model}","GET \/api\/firmware\/{id}","PUT \/api\/firmware\/{id}","PUT \/api\/firmware\/publish\/{id}","DELETE \/api\/firmware\/{id}","POST \/api\/group","GET \/api\/group","GET \/api\/group\/tree","GET \/api\/group\/{id}","GET \/api\/group\/{id}\/children","PUT \/api\/group\/{id}","DELETE \/api\/group\/{id}","POST \/api\/group\/add_device","POST \/api\/group\/remove_device","GET \/api\/group\/devices\/{id}","POST \/api\/tag","GET \/api\/tag","GET \/api\/tag\/{id}","PUT \/api\/tag\/{id}","DELETE \/api\/tag\/{id}","POST \/api\/tag\/add_device","POST \/api\/tag\/remove_device","POST \/api\/tag\/batch_add","POST \/api\/tag\/batch_remove","GET \/api\/tag\/devices\/{id}","GET \/api\/tag\/device_tags\/{deviceId}","POST \/api\/push_task","GET \/api\/push_task","GET \/api\/push_task\/{id}","PUT \/api\/push_task\/{id}","DELETE \/api\/push_task\/{id}","POST \/api\/push_task\/add_log","POST \/api\/push_task\/batch_log","GET \/api\/notification","GET \/api\/notification\/unread-count","GET \/api\/notification\/stats","GET \/api\/notification\/{id}","POST \/api\/notification\/publish","PUT \/api\/notification","PUT \/api\/notification\/{id}","DELETE \/api\/notification\/{id}","GET \/api\/plugin","GET \/api\/plugin\/stats","GET \/api\/plugin\/device\/{deviceId}","GET \/api\/plugin\/pending","POST \/api\/plugin\/external","POST \/api\/plugin\/upload","POST \/api\/plugin\/initialize","POST \/api\/plugin\/init","GET \/api\/plugin\/{id}","PUT \/api\/plugin\/{id}\/toggle","POST \/api\/plugin\/approve\/{id}","POST \/api\/plugin\/device\/{deviceId}\/enable\/{pluginId}","POST \/api\/plugin\/device\/{deviceId}\/disable\/{pluginId}","DELETE \/api\/plugin\/{id}","GET \/api\/status","GET \/api\/system\/settings","PUT \/api\/system\/settings","POST \/api\/system\/settings\/reset","GET \/api\/system\/info","GET \/api\/system\/database\/backup","POST \/api\/system\/restart","POST \/api\/system\/cache\/clear","GET \/api\/gateway\/*","POST \/api\/gateway\/*","PUT \/api\/gateway\/*","DELETE \/api\/gateway\/*","GET \/health","GET \/api\/health","GET \/api\/monitoring\/status","GET \/api\/monitoring\/metrics","GET \/api\/monitoring\/logs"]}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/info$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/info","route_path":"\/api\/user\/info","pattern":"\/^\\\/api\\\/user\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/devices$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/devices","route_path":"\/api\/user\/devices","pattern":"\/^\\\/api\\\/user\\\/devices$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/exist$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/exist","route_path":"\/api\/user\/exist","pattern":"\/^\\\/api\\\/user\\\/exist$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user","route_path":"\/api\/user","pattern":"\/^\\\/api\\\/user$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/stats$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/stats","route_path":"\/api\/user\/stats","pattern":"\/^\\\/api\\\/user\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/user\/{id}","route_path":"\/api\/user\/{id}","pattern":"\/^\\\/api\\\/user\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device","route_path":"\/api\/device","pattern":"\/^\\\/api\\\/device$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/device\/{id}","route_path":"\/api\/device\/{id}","pattern":"\/^\\\/api\\\/device\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}","route_path":"\/api\/message\/{deviceId}","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/unread","route_path":"\/api\/message\/{deviceId}\/unread","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/unread$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/message\/{deviceId}\/pending","route_path":"\/api\/message\/{deviceId}\/pending","pattern":"\/^\\\/api\\\/message\\\/(?P<deviceId>[^\\\/]+)\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware","route_path":"\/api\/firmware","pattern":"\/^\\\/api\\\/firmware$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/active\/{model}","route_path":"\/api\/firmware\/active\/{model}","pattern":"\/^\\\/api\\\/firmware\\\/active\\\/(?P<model>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/firmware\/{id}","route_path":"\/api\/firmware\/{id}","pattern":"\/^\\\/api\\\/firmware\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group","route_path":"\/api\/group","pattern":"\/^\\\/api\\\/group$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/tree$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/tree","route_path":"\/api\/group\/tree","pattern":"\/^\\\/api\\\/group\\\/tree$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}","route_path":"\/api\/group\/{id}","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/{id}\/children","route_path":"\/api\/group\/{id}\/children","pattern":"\/^\\\/api\\\/group\\\/(?P<id>[^\\\/]+)\\\/children$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/group\/devices\/{id}","route_path":"\/api\/group\/devices\/{id}","pattern":"\/^\\\/api\\\/group\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag","route_path":"\/api\/tag","pattern":"\/^\\\/api\\\/tag$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/{id}","route_path":"\/api\/tag\/{id}","pattern":"\/^\\\/api\\\/tag\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/devices\/{id}","route_path":"\/api\/tag\/devices\/{id}","pattern":"\/^\\\/api\\\/tag\\\/devices\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/tag\/device_tags\/{deviceId}","route_path":"\/api\/tag\/device_tags\/{deviceId}","pattern":"\/^\\\/api\\\/tag\\\/device_tags\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task","route_path":"\/api\/push_task","pattern":"\/^\\\/api\\\/push_task$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/push_task\/{id}","route_path":"\/api\/push_task\/{id}","pattern":"\/^\\\/api\\\/push_task\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification","route_path":"\/api\/notification","pattern":"\/^\\\/api\\\/notification$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/unread-count","route_path":"\/api\/notification\/unread-count","pattern":"\/^\\\/api\\\/notification\\\/unread-count$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/stats$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/stats","route_path":"\/api\/notification\/stats","pattern":"\/^\\\/api\\\/notification\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/notification\/{id}","route_path":"\/api\/notification\/{id}","pattern":"\/^\\\/api\\\/notification\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin","route_path":"\/api\/plugin","pattern":"\/^\\\/api\\\/plugin$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/stats$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/stats","route_path":"\/api\/plugin\/stats","pattern":"\/^\\\/api\\\/plugin\\\/stats$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/device\/{deviceId}","route_path":"\/api\/plugin\/device\/{deviceId}","pattern":"\/^\\\/api\\\/plugin\\\/device\\\/(?P<deviceId>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/pending$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/pending","route_path":"\/api\/plugin\/pending","pattern":"\/^\\\/api\\\/plugin\\\/pending$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/plugin\/{id}","route_path":"\/api\/plugin\/{id}","pattern":"\/^\\\/api\\\/plugin\\\/(?P<id>[^\\\/]+)$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/status$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/status","route_path":"\/api\/status","pattern":"\/^\\\/api\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/settings$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/settings","route_path":"\/api\/system\/settings","pattern":"\/^\\\/api\\\/system\\\/settings$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/info$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/info","route_path":"\/api\/system\/info","pattern":"\/^\\\/api\\\/system\\\/info$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/system\/database\/backup","route_path":"\/api\/system\/database\/backup","pattern":"\/^\\\/api\\\/system\\\/database\\\/backup$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/gateway\\\/.*$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/gateway\/*","route_path":"\/api\/gateway\/.*","pattern":"\/^\\\/api\\\/gateway\\\/.*$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/health$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/health","route_path":"\/health","pattern":"\/^\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/health$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/health","route_path":"\/api\/health","pattern":"\/^\\\/api\\\/health$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/status$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/status","route_path":"\/api\/monitoring\/status","pattern":"\/^\\\/api\\\/monitoring\\\/status$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/metrics","route_path":"\/api\/monitoring\/metrics","pattern":"\/^\\\/api\\\/monitoring\\\/metrics$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: 转换后的正则表达式 {"pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/"}
[2026-01-22 10:20:37.000000] INFO: 尝试匹配路由 {"route_pattern":"GET \/api\/monitoring\/logs","route_path":"\/api\/monitoring\/logs","pattern":"\/^\\\/api\\\/monitoring\\\/logs$\/","request_path":"\/@vite\/client"}
[2026-01-22 10:20:37.000000] INFO: API请求 {"request_id":"req_697189751ae507.66005555","method":"GET","path":"\/@vite\/client","query":[],"ip":"::1","user_agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","api_version":"v1","content_type":"unknown","body":null}
[2026-01-22 10:20:37.000000] INFO: 速率限制中间件执行 {"request":{"method":"GET","uri":"\/@vite\/client","path":"\/@vite\/client","query":[],"ip":"::1","headers":{"Host":"localhost:8000","Connection":"keep-alive","Origin":"http:\/\/localhost:8000","sec-ch-ua-platform":"\"Windows\"","User-Agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) TraeCN\/1.104.3 Chrome\/138.0.7204.251 Electron\/37.6.1 Safari\/537.36","Accept":"*\/*","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","sec-ch-ua-mobile":"?0","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Referer":"http:\/\/localhost:8000\/dashboard.html?ide_webview_request_time=1769048436796","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN"},"body":"","api_version":"v1"}}
[2026-01-22 10:20:37.000000] INFO: 未匹配到路由 {"method":"GET","path":"\/@vite\/client"}
