[2026-01-16 14:45:58.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.814697265625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.291534423828125e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.38690185546875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.315376281738281e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.888938903808594e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.144ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":0.00014400482177734375}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.4809112548828125e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.330ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":0.0003299713134765625}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.220008850097656e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.008148193359375e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":5.3882598876953125e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.079ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":7.915496826171875e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.7206878662109375e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.410743713378906e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.792213439941406e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.9114227294921875e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.602836608886719e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.507469177246094e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":6.198883056640625e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":6.198883056640625e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.00543212890625e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.100799560546875e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.1961669921875e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.100799560546875e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.078315734863281e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.075ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.510185241699219e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.058ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.793571472167969e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.00543212890625e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 14:51:26.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1\r\n            )","params":[],"duration":6.914138793945312e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.1975250244140625e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.063ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":6.318092346191406e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.1021575927734375e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.887580871582031e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.318092346191406e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.91278076171875e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.1021575927734375e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.0067901611328125e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.112ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":0.00011205673217773438}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.009506225585938e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.982948303222656e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.3882598876953125e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.38690185546875e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.068ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.794929504394531e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.291534423828125e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.1961669921875e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-16 14:53:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.4809112548828125e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.790855407714844e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.695487976074219e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.4809112548828125e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:23:03.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.031ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1\r\n            )","params":[],"duration":3.0994415283203125e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.910064697265625e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.00543212890625e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.220008850097656e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.081031799316406e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.4809112548828125e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":3.790855407714844e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.9114227294921875e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 17:23:13.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.601478576660156e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.218650817871094e-5}
[2026-01-16 17:23:36.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.814697265625e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.38690185546875e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.0994415283203125e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.719329833984375e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":4.00543212890625e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.792213439941406e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-16 17:23:37.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.034ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1\r\n            )","params":[],"duration":3.409385681152344e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.291534423828125e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.506111145019531e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.695487976074219e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.220008850097656e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.2928924560546875e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.982948303222656e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.792213439941406e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.719329833984375e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":4.9114227294921875e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.128ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":0.00012803077697753906}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-16 17:23:54.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":5.412101745605469e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.38690185546875e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.1948089599609375e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.719329833984375e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.079673767089844e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 35.660ms {"query":"ALTER TABLE users ADD COLUMN two_factor_enabled INTEGER DEFAULT 0","params":[],"duration":0.0356600284576416}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.834ms {"query":"ALTER TABLE users ADD COLUMN two_factor_secret TEXT","params":[],"duration":0.0008339881896972656}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":4.291534423828125e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.910064697265625e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.0994415283203125e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.029ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":2.9087066650390625e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.029ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":2.9087066650390625e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.029ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":2.9087066650390625e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.028ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":2.7894973754882812e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 17:26:29.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":6.4849853515625e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.2928924560546875e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.291534423828125e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.38690185546875e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.482269287109375e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":7.390975952148438e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.695487976074219e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.315376281738281e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.38690185546875e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.412101745605469e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.886222839355469e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.090ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":8.988380432128906e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.1975250244140625e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.910064697265625e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.981590270996094e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.910064697265625e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.094ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":9.393692016601562e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-16 17:26:32.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.506111145019531e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.100799560546875e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.1961669921875e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.315376281738281e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.790855407714844e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.1975250244140625e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.1961669921875e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.814697265625e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.412101745605469e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.9114227294921875e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.315376281738281e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.315376281738281e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.315376281738281e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.088ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":8.797645568847656e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.315376281738281e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.2928924560546875e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.00543212890625e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.315376281738281e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.221366882324219e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 17:26:38.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:45:31.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.107ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":0.00010704994201660156}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.120ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0001201629638671875}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.079673767089844e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.061ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.103515625e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.086ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":8.58306884765625e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.57763671875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.236ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":0.00023603439331054688}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.4849853515625e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:32.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.067ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":6.699562072753906e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.719329833984375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.061ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":6.103515625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.085ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":8.511543273925781e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.064ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":6.389617919921875e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.109ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":0.00010895729064941406}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.088ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":8.797645568847656e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.090ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":9.012222290039062e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.106ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00010609626770019531}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.079ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.891654968261719e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.071ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.104873657226562e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:45:33.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.091ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":9.107589721679688e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.094ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":9.393692016601562e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.108ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":0.00010800361633300781}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.450ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":0.00045013427734375}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.069ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":6.914138793945312e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.009506225585938e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.194ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":0.00019407272338867188}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.985664367675781e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.119ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00011897087097167969}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.145ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00014495849609375}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.117ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00011682510375976562}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.078ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.796287536621094e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.067ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":6.699562072753906e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.073ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.295608520507812e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.078ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":7.796287536621094e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.221366882324219e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.075ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.510185241699219e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.57763671875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.077ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":7.700920104980469e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.076ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":7.605552673339844e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.984306335449219e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.072ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.200241088867188e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.009506225585938e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.085ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":8.487701416015625e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:34.000000] INFO: Query executed in 0.184ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":0.00018405914306640625}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.220008850097656e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:41.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.085ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":8.511543273925781e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.095ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":9.489059448242188e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.071ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.104873657226562e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.890296936035156e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.719329833984375e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.034ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.225ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":0.000225067138671875}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.087ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":8.702278137207031e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.070ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.009506225585938e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.076957702636719e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:42.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.078315734863281e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.890296936035156e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.058ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.817413330078125e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.095ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":9.489059448242188e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.4849853515625e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.098ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":9.799003601074219e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.914138793945312e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.061ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.079673767089844e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.095ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":9.512901306152344e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:46.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.034ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.077ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":7.700920104980469e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.719329833984375e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.176ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00017595291137695312}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.390975952148438e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:47.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.221366882324219e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.073ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":7.295608520507812e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.072ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.200241088867188e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.580352783203125e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.079ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":7.891654968261719e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.091ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":9.107589721679688e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:45:49.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.079673767089844e-5}
[2026-01-22 10:45:50.000000] INFO: Query executed in 0.076ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.605552673339844e-5}
[2026-01-22 10:45:50.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 10:45:50.000000] INFO: Query executed in 0.121ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":0.00012111663818359375}
[2026-01-22 10:45:50.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:50.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 10:45:50.000000] INFO: Query executed in 0.065ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":6.4849853515625e-5}
[2026-01-22 10:45:50.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:50.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:50.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:45:50.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:50.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.221366882324219e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.065ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":6.508827209472656e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.083ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":8.296966552734375e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:51.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.104ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":0.00010418891906738281}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:52.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.221366882324219e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.318092346191406e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.719329833984375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.083ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":8.296966552734375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.914138793945312e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.318092346191406e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.221366882324219e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.580352783203125e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.390975952148438e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.092ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":9.202957153320312e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.079ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":7.915496826171875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.031ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":2.9802322387695312e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.034ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.818771362304688e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.067ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.699562072753906e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:54.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":7.390975952148438e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.580352783203125e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:45:59.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.085ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":8.487701416015625e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.068ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":6.818771362304688e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.063ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:46:00.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.106ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":0.00010585784912109375}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.103ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":0.000102996826171875}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.221366882324219e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.114ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.00011396408081054688}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.076ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.605552673339844e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.078315734863281e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.097ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":9.703636169433594e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.088ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":8.797645568847656e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.719329833984375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.078315734863281e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.719329833984375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.57763671875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.063ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.120ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":0.00011992454528808594}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.032ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.580352783203125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.890296936035156e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:46:15.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.984306335449219e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.273ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.00027298927307128906}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.075ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":7.486343383789062e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.084ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":8.416175842285156e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.57763671875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.985664367675781e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.57763671875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.069ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.890296936035156e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.103ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":0.000102996826171875}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:46:16.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.151ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":0.00015115737915039062}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.091ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":9.107589721679688e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.078315734863281e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.107ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":0.00010704994201660156}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.078315734863281e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.067ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.699562072753906e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.081ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":8.106231689453125e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.638ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":0.0006380081176757812}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:50:01.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.162ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00016188621520996094}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.078315734863281e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.064ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.413459777832031e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:50:02.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.032ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.221366882324219e-5}
[2026-01-22 10:50:09.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.076957702636719e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.120ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":0.0001201629638671875}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.081ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":8.106231689453125e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.890296936035156e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:50:28.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.070ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":6.985664367675781e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:55:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.061ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":6.103515625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.221366882324219e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.034ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.034ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.075ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":7.510185241699219e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.091ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":9.107589721679688e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:55:14.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.222724914550781e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.069ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":6.890296936035156e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.102ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":0.00010204315185546875}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.097ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":9.703636169433594e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.073ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":7.295608520507812e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.094ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":9.393692016601562e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":7.390975952148438e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.414817810058594e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.076ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.605552673339844e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.078ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":7.796287536621094e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.172ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":0.00017189979553222656}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.196ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":0.00019598007202148438}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.089ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":8.916854858398438e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.065ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":6.508827209472656e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.075ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":7.486343383789062e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":7.081031799316406e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.221366882324219e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.081ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":8.106231689453125e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.7220458984375e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:21.000000] INFO: Query executed in 0.061ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":6.103515625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:27.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.57763671875e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":7.414817810058594e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.034ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.077ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.700920104980469e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.150ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":0.0001499652862548828}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.081ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":8.106231689453125e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.145ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":0.00014495849609375}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:39.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.063ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.57763671875e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.082ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":8.20159912109375e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.890296936035156e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.067ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":6.699562072753906e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.719329833984375e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":7.414817810058594e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.082ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":8.20159912109375e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.201ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.0002009868621826172}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.067ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.699562072753906e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:55:40.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.078ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":7.796287536621094e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.143ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":0.0001430511474609375}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.691ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.0006911754608154297}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.069ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":6.914138793945312e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.525ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":0.0005249977111816406}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":7.390975952148438e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.105ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":0.00010514259338378906}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.124ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":0.0001239776611328125}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.068ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.818771362304688e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.076957702636719e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.985664367675781e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.063ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":6.318092346191406e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.097ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":9.703636169433594e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.076ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.581710815429688e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:58:20.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.065ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":6.4849853515625e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.091ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":9.107589721679688e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.069ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":6.890296936035156e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.120ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":0.00011992454528808594}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.453ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":0.00045299530029296875}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":5.221366882324219e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.083ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":8.296966552734375e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.084ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":8.392333984375e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:58:27.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:58:34.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:58:34.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:58:34.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:34.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:58:34.000000] INFO: Query executed in 0.839ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":0.0008389949798583984}
[2026-01-22 10:58:34.000000] INFO: Query executed in 0.080ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":8.0108642578125e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.258ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.0002579689025878906}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.125ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":0.00012493133544921875}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.077ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":7.700920104980469e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.128ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":0.0001277923583984375}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.081ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":8.106231689453125e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.103ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":0.000102996826171875}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.083ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":8.296966552734375e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.084ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":8.392333984375e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.067ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":6.699562072753906e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.099ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":9.918212890625e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.208ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":0.0002079010009765625}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":6.604194641113281e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.063ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":7.414817810058594e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.080ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":8.0108642578125e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.076ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":7.605552673339844e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.078315734863281e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.081ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":8.106231689453125e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.109ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":0.00010895729064941406}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.090ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":9.012222290039062e-5}
[2026-01-22 10:58:35.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.034ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.092ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":9.202957153320312e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.157ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":0.0001571178436279297}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.034ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.315376281738281e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.091ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":9.083747863769531e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 10:58:40.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.081ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":8.082389831542969e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 9.693ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":0.009693145751953125}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.094ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":9.393692016601562e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.065ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.7220458984375e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.221366882324219e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.096ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":9.608268737792969e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.4849853515625e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.067ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.064ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.103ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.000102996826171875}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.097ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":9.703636169433594e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.085ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":8.511543273925781e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.078315734863281e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.100ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":9.989738464355469e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.390975952148438e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:11:03.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:11:04.000000] INFO: Query executed in 0.064ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:11:04.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:11:04.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:04.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:04.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:11:04.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:04.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:04.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:04.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:04.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:04.000000] INFO: Query executed in 0.077ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":7.700920104980469e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.090ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":8.988380432128906e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.098ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":9.799003601074219e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.390975952148438e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.580352783203125e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:06.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.101ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":0.00010085105895996094}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.081ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":8.082389831542969e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.071ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":7.104873657226562e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.094ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":9.393692016601562e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":7.009506225585938e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.985664367675781e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.076ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":7.605552673339844e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.084ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":8.392333984375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.7220458984375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.083ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":8.320808410644531e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.116ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":0.00011610984802246094}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.087ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":8.678436279296875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":7.414817810058594e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.083ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":8.296966552734375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.097ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":9.703636169433594e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.096ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":9.608268737792969e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.209ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":0.0002090930938720703}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.063ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.061ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":6.103515625e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.221366882324219e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.467ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":0.0004668235778808594}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.145ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":0.00014495849609375}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 1.061ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0010609626770019531}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.118ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00011801719665527344}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.086ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":8.606910705566406e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.078ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.796287536621094e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:11:13.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.079ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":7.891654968261719e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.068ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.115ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":0.00011491775512695312}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.580352783203125e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.058ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":7.390975952148438e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.078315734863281e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.070ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.009506225585938e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.078ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.796287536621094e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.152ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":0.0001518726348876953}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.058ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.076957702636719e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.085ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":8.487701416015625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.073ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":7.295608520507812e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.390975952148438e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:11:19.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.104ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":0.00010395050048828125}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":7.414817810058594e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.222724914550781e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.199ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0001990795135498047}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.890296936035156e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.390975952148438e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.482ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":0.0004818439483642578}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.076957702636719e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.293ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":0.0002930164337158203}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.081ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":8.082389831542969e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.071ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.104873657226562e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.081031799316406e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.446ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":0.00044608116149902344}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.058ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.390975952148438e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":7.390975952148438e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.071ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":7.104873657226562e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.221366882324219e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.082ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":8.20159912109375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.124ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":0.0001239776611328125}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.093ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":9.298324584960938e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.072ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.200241088867188e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.080ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":8.0108642578125e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:11:26.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.278ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":0.0002779960632324219}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.076957702636719e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.101ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":0.00010085105895996094}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.109ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":0.00010895729064941406}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.070ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.009506225585938e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:15:41.000000] INFO: Query executed in 0.164ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":0.000164031982421875}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.085ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":8.487701416015625e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.095ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":9.512901306152344e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.121ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":0.00012087821960449219}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.058ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.817413330078125e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.090ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":9.012222290039062e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.109ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00010895729064941406}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.081ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":8.106231689453125e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.123ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00012302398681640625}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.073ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":7.295608520507812e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 1.725ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0017249584197998047}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.084ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":8.416175842285156e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.121ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00012111663818359375}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.071ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.104873657226562e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.079ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.915496826171875e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:15:42.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.067ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.152ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":0.0001518726348876953}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.125ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":0.0001251697540283203}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.032ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.068ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.818771362304688e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.088ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":8.797645568847656e-5}
[2026-01-22 11:15:45.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.318092346191406e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.073ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.295608520507812e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:15:46.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.105ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0001049041748046875}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.120ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":0.00011992454528808594}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.076957702636719e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.080ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":8.0108642578125e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.067ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:15:48.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.221366882324219e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.4849853515625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.462ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0004620552062988281}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.103ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":0.000102996826171875}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.082ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":8.20159912109375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.070ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":7.009506225585938e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.063ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":6.318092346191406e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.102ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":0.00010204315185546875}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.076ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.605552673339844e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.080ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":8.0108642578125e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.221366882324219e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.082ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":8.20159912109375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.073ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":7.319450378417969e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:07.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.168ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":0.00016808509826660156}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.133ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":0.00013303756713867188}
[2026-01-22 11:16:10.000000] INFO: Query executed in 1.639ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":0.0016388893127441406}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.082ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":8.20159912109375e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.914138793945312e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.4849853515625e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.181ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":0.00018095970153808594}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.081ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":8.106231689453125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.101ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":0.0001010894775390625}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.097ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":9.703636169433594e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.096ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":9.608268737792969e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.073ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.295608520507812e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.072ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.200241088867188e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.061ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":6.103515625e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.091ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":9.107589721679688e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:10.000000] INFO: Query executed in 0.129ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":0.0001289844512939453}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.090ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":9.012222290039062e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.7220458984375e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":2.9802322387695312e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":2.9802322387695312e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.0040740966796875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:11.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.086ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":8.606910705566406e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.102ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":0.00010180473327636719}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.078315734863281e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":7.009506225585938e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.075ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.486343383789062e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.105ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":0.00010514259338378906}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.262ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":0.0002620220184326172}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.105ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.00010514259338378906}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.160ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":0.00015997886657714844}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.104ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":0.00010395050048828125}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.151ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":0.00015115737915039062}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.099ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":9.894371032714844e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.105ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.00010514259338378906}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.068ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.064ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.106ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":0.00010585784912109375}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.221366882324219e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.090ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":8.988380432128906e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.100ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00010013580322265625}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.327ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00032711029052734375}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.434ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0004341602325439453}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.082ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":8.20159912109375e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.075ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":7.510185241699219e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.094ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":9.393692016601562e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.221366882324219e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.088ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":8.797645568847656e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:19.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.075ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.510185241699219e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.081031799316406e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.088ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":8.797645568847656e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.318092346191406e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.061ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":6.079673767089844e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.077ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":7.700920104980469e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.065ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:20.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.098ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":9.799003601074219e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.085ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":8.487701416015625e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.080ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":7.987022399902344e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.058ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.079ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.915496826171875e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":7.390975952148438e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.081ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":8.082389831542969e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.719329833984375e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.089ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":8.916854858398438e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.075ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.510185241699219e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.082ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":8.177757263183594e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.890296936035156e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.084ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":8.392333984375e-5}
[2026-01-22 11:16:22.000000] INFO: Query executed in 0.357ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":0.00035691261291503906}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.091ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":9.083747863769531e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.091ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":9.107589721679688e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.096ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":9.608268737792969e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.126ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":0.000125885009765625}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.076ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":7.605552673339844e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.085ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":8.487701416015625e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.089ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":8.893013000488281e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.414817810058594e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.091ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":9.083747863769531e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.171ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.00017118453979492188}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.079ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":7.891654968261719e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.072ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.200241088867188e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.136ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":0.00013589859008789062}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.086ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":8.58306884765625e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.090ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":9.012222290039062e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.188ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":0.00018787384033203125}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.115ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":0.00011491775512695312}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.245ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":0.00024509429931640625}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.112ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.00011205673217773438}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.100ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":9.989738464355469e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.268ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":0.00026798248291015625}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.102ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":0.00010204315185546875}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.087ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":8.702278137207031e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.914138793945312e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.069ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.890296936035156e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.084ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":8.392333984375e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:30.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.084ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":8.392333984375e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.145ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":0.00014495849609375}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.196ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":0.00019598007202148438}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.393ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":0.000392913818359375}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.092ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":9.202957153320312e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:16:35.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.7220458984375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.7220458984375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.067ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.081ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":8.106231689453125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.096ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":9.584426879882812e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.719329833984375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.065ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.719329833984375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.719329833984375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.075ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.486343383789062e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.146ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":0.00014591217041015625}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.076ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.605552673339844e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 11:16:36.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.132ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":0.00013208389282226562}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.114ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00011396408081054688}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.077ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.700920104980469e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.068ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:38.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.079ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":7.891654968261719e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.080ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":8.0108642578125e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.078315734863281e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.094ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":9.393692016601562e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":7.319450378417969e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.414817810058594e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.082ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":8.20159912109375e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.985664367675781e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.7220458984375e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.070ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.009506225585938e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:46.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.075ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":7.486343383789062e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.068ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.719329833984375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.106ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.00010585784912109375}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.719329833984375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.091ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":9.107589721679688e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:47.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.116ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":0.00011587142944335938}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.686ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0006859302520751953}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.130ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":0.00013017654418945312}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.117ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":0.00011706352233886719}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.4849853515625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.103ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":0.000102996826171875}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.095ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":9.489059448242188e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.078315734863281e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.116ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":0.00011587142944335938}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.7220458984375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.078ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":7.796287536621094e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.183ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":0.00018286705017089844}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.085ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":8.511543273925781e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.221366882324219e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.580352783203125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.414817810058594e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.091ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":9.083747863769531e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.719329833984375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.981590270996094e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.069ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.890296936035156e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.220008850097656e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.483ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":0.0004830360412597656}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.818771362304688e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.030ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":2.9802322387695312e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.083ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":8.296966552734375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.064ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 11:16:50.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.068ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.068ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":6.818771362304688e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.106ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":0.00010609626770019531}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:16:51.000000] INFO: Query executed in 0.107ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":0.00010704994201660156}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":7.009506225585938e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.065ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.094ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":9.393692016601562e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.438ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":0.0004379749298095703}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.086ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":8.606910705566406e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.087ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":8.702278137207031e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.7220458984375e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.414817810058594e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.079ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.915496826171875e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.069ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":6.914138793945312e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.079ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":7.915496826171875e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.097ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":9.703636169433594e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.111ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":0.00011110305786132812}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.129ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0001289844512939453}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.57763671875e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.580352783203125e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.145ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.00014495849609375}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:17:05.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.078ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":7.82012939453125e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.135ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":0.00013518333435058594}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.083ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":8.296966552734375e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.113ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":0.00011301040649414062}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 2.782ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":0.002782106399536133}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.064ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.064ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 1.827ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0018270015716552734}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.084ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":8.392333984375e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.091ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":9.107589721679688e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.083ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":8.296966552734375e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.078ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":7.796287536621094e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.088ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":8.797645568847656e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.890296936035156e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.106ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":0.00010585784912109375}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.089ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":8.916854858398438e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.985664367675781e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.081ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":8.106231689453125e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:17:25.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.078ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":7.796287536621094e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":7.390975952148438e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.101ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":0.00010085105895996094}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.077ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.700920104980469e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.069ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":6.914138793945312e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.072ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":7.200241088867188e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.318092346191406e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.221366882324219e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.085ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":8.511543273925781e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.122ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":0.00012183189392089844}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.069ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":6.914138793945312e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.098ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":9.799003601074219e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.981590270996094e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.076ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":7.605552673339844e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.064ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.890296936035156e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.072ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":7.200241088867188e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.079ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":7.891654968261719e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.212ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00021195411682128906}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:17:27.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:17:28.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 11:17:28.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:17:28.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:17:28.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:17:28.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:17:28.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:17:28.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:28.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:28.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:28.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:17:28.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.123ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":0.00012302398681640625}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.4849853515625e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.097ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":9.703636169433594e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.103ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.000102996826171875}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.7220458984375e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.106ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":0.00010585784912109375}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.109ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00010895729064941406}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.123ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.00012302398681640625}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.073ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.295608520507812e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.081031799316406e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.148ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":0.0001480579376220703}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.412101745605469e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.077ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":7.700920104980469e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.063ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":6.29425048828125e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.985664367675781e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.085ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":8.487701416015625e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.108ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":0.00010800361633300781}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.064ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.389617919921875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.7220458984375e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.101ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0001010894775390625}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.221366882324219e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:17:30.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.314018249511719e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.083ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":8.296966552734375e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.7220458984375e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":6.198883056640625e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.482269287109375e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.074ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":7.414817810058594e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.7206878662109375e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.8160552978515625e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.042ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.1961669921875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.085ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":8.487701416015625e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.075ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":7.486343383789062e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.600120544433594e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.886222839355469e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.910064697265625e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.218650817871094e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.031ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.0994415283203125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.032ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.1948089599609375e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.4809112548828125e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.035ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.504753112792969e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.047ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.696846008300781e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.070ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.985664367675781e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.316734313964844e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.315376281738281e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.790855407714844e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-22 11:18:13.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.078ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":7.796287536621094e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.2928924560546875e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.8160552978515625e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.4809112548828125e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":5.316734313964844e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.890296936035156e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.91278076171875e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.887580871582031e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.790855407714844e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.4836273193359375e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.504753112792969e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.3855438232421875e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.602836608886719e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.695487976074219e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":3.886222839355469e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.600120544433594e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.9114227294921875e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.695487976074219e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.045ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.506111145019531e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.072ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.200241088867188e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.506111145019531e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.078ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":7.796287536621094e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.063ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":6.318092346191406e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.078ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.796287536621094e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.316734313964844e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":5.984306335449219e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:19:26.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":6.198883056640625e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.105ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":0.0001049041748046875}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.506111145019531e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.790855407714844e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.079ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":7.891654968261719e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.072ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":7.200241088867188e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.078ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":7.796287536621094e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.412101745605469e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.602836608886719e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.088ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":8.797645568847656e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.696846008300781e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.131ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0001308917999267578}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.099ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":9.918212890625e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.040ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.00543212890625e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.038ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.814697265625e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.074ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.414817810058594e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.3855438232421875e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.409385681152344e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.504753112792969e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.482269287109375e-5}
[2026-01-23 09:21:33.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.4809112548828125e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.504753112792969e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.695487976074219e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.887580871582031e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.314018249511719e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.695487976074219e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":3.790855407714844e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.504753112792969e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.887580871582031e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.695487976074219e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.600120544433594e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.504753112792969e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.3855438232421875e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.3855438232421875e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.409385681152344e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.037ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.719329833984375e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.091ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":9.107589721679688e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.38690185546875e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.291534423828125e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.504753112792969e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-23 09:23:57.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.4809112548828125e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.482269287109375e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.078315734863281e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.504753112792969e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.4809112548828125e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.2901763916015625e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":3.504753112792969e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.409385681152344e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":3.814697265625e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.600120544433594e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.3855438232421875e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.100799560546875e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.4836273193359375e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.696846008300781e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.482269287109375e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":5.602836608886719e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":4.38690185546875e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.1961669921875e-5}
[2026-01-23 09:24:56.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-23 09:24:57.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:24:57.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.409385681152344e-5}
[2026-01-23 09:24:57.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.409385681152344e-5}
[2026-01-23 09:24:57.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.504753112792969e-5}
[2026-01-23 09:24:57.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.009506225585938e-5}
[2026-01-23 09:24:57.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-23 09:24:57.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:24:57.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-23 09:24:57.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":5.507469177246094e-5}
[2026-01-23 09:24:57.000000] INFO: Query executed in 0.083ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":8.296966552734375e-5}
[2026-01-23 09:24:57.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:24:57.000000] INFO: Query executed in 0.505ms {"query":"SELECT * FROM users LIMIT 1000","params":[],"duration":0.0005049705505371094}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.250ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":0.00025010108947753906}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.2928924560546875e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.065ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":6.508827209472656e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":4.506111145019531e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.887580871582031e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.062ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":6.198883056640625e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.91278076171875e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.063ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":6.29425048828125e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.109ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":0.00010895729064941406}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.008148193359375e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.8160552978515625e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.412101745605469e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.887580871582031e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.379ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":0.0003788471221923828}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.057ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":5.698204040527344e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.887580871582031e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.602836608886719e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.483ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.0004830360412597656}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.067ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.699562072753906e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.077ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.700920104980469e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.696846008300781e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.887580871582031e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.077ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.700920104980469e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":5.507469177246094e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.9114227294921875e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:25:57.000000] INFO: Query executed in 39.800ms {"query":"UPDATE users SET password_hash = :password_hash WHERE username = :username","params":{"password_hash":"$2y$10$tMESTsHvI0YIzW0Ndi36mucBvGel64dNXHpU3hkmM0tLVijS9vHjq","username":"iswhat"},"duration":0.03979992866516113}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.412101745605469e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.316734313964844e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.695487976074219e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.100799560546875e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":5.2928924560546875e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.506111145019531e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":3.600120544433594e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":3.409385681152344e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.037ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.695487976074219e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":3.409385681152344e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.221366882324219e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.049ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":4.9114227294921875e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.506111145019531e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.409385681152344e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.504753112792969e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.985664367675781e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.093ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":9.298324584960938e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.099ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":9.894371032714844e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.057ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.698204040527344e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.068ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.794929504394531e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.091ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":9.083747863769531e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":4.696846008300781e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.061ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.103515625e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.982948303222656e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":5.2928924560546875e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.084ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":8.392333984375e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.056ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":5.602836608886719e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.3882598876953125e-5}
[2026-01-23 09:26:52.000000] INFO: Query executed in 0.536ms {"query":"SELECT username, password_hash FROM users WHERE username = 'iswhat' LIMIT 1000","params":[],"duration":0.0005359649658203125}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.039ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":3.910064697265625e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":4.291534423828125e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.00543212890625e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.00543212890625e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.071ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":7.104873657226562e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.887580871582031e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.8160552978515625e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.887580871582031e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.887580871582031e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.9114227294921875e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.087ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":8.702278137207031e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.053ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.2928924560546875e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.412101745605469e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":3.4809112548828125e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.887580871582031e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":4.8160552978515625e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":5.507469177246094e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":5.1021575927734375e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.696846008300781e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.409385681152344e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.2928924560546875e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 1.673ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":0.001672983169555664}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.107ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":0.00010704994201660156}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.070ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.009506225585938e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.073ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":7.295608520507812e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.793571472167969e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.065ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.508827209472656e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.066ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.604194641113281e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.040ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":4.00543212890625e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.3855438232421875e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.100799560546875e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.075ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":7.510185241699219e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.886222839355469e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.910064697265625e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.696846008300781e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.052ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:28:00.000000] INFO: Query executed in 0.464ms {"query":"SELECT username, password_hash FROM users WHERE username = 'iswhat' LIMIT 1000","params":[],"duration":0.0004639625549316406}
[2026-01-23 09:28:01.000000] INFO: Query executed in 0.231ms {"query":"SELECT u.id, u.username, u.email, u.password_hash, u.api_key, u.api_key_expires_at, u.status, u.is_admin FROM users u WHERE u.username = :username OR u.email = :email LIMIT 1000","params":{"username":"iswhat","email":"iswhat"},"duration":0.00023102760314941406}
[2026-01-23 09:28:01.000000] INFO: Query executed in 365.770ms {"query":"UPDATE users SET last_login = :last_login WHERE id = :id","params":{"last_login":"2026-01-23 09:28:01","id":3},"duration":0.3657698631286621}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.052ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1,\r\n                two_factor_enabled INTEGER DEFAULT 0,\r\n                two_factor_secret TEXT\r\n            )","params":[],"duration":5.1975250244140625e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.600120544433594e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":3.2901763916015625e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":3.409385681152344e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":4.291534423828125e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.291534423828125e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.315376281738281e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.291534423828125e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.049ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":4.9114227294921875e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":5.91278076171875e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.048ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.792213439941406e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.482269287109375e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.055ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":5.4836273193359375e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.048ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":4.8160552978515625e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":4.482269287109375e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":5.0067901611328125e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":4.38690185546875e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.062ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":6.198883056640625e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.3882598876953125e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.055ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.507469177246094e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.053ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.316734313964844e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.069ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.890296936035156e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.063ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.29425048828125e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.054ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.412101745605469e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.050ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":4.982948303222656e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":6.580352783203125e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.075ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":7.510185241699219e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.910064697265625e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.039ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":3.910064697265625e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":4.410743713378906e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.066ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":6.604194641113281e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":4.38690185546875e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":4.100799560546875e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":4.291534423828125e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.046ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":4.601478576660156e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.814697265625e-5}
[2026-01-23 09:28:21.000000] INFO: Query executed in 0.349ms {"query":"SELECT u.id, u.username, u.email, u.password_hash, u.api_key, u.api_key_expires_at, u.status, u.is_admin FROM users u WHERE u.username = :username OR u.email = :email LIMIT 1000","params":{"username":"iswhat","email":"iswhat"},"duration":0.00034880638122558594}
[2026-01-23 09:28:21.000000] INFO: Query executed in 92.875ms {"query":"UPDATE users SET last_login = :last_login WHERE id = :id","params":{"last_login":"2026-01-23 09:28:21","id":3},"duration":0.09287500381469727}
