[2026-01-16 14:45:58.000000] INFO: Query executed in 0.046ms {"query":"CREATE TABLE IF NOT EXISTS users (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                username TEXT NOT NULL UNIQUE,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                api_key TEXT NOT NULL UNIQUE,\r\n                api_key_created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                api_key_expires_at DATETIME,\r\n                api_key_ip_whitelist TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                last_login DATETIME,\r\n                is_admin INTEGER DEFAULT 0,\r\n                status INTEGER DEFAULT 1\r\n            )","params":[],"duration":4.601478576660156e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key ON users (api_key)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.038ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_email ON users (email)","params":[],"duration":3.814697265625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_username ON users (username)","params":[],"duration":4.291534423828125e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.051ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_status ON users (status)","params":[],"duration":5.1021575927734375e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_users_api_key_expires ON users (api_key_expires_at)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.060ms {"query":"CREATE TABLE IF NOT EXISTS devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL UNIQUE,\r\n                nickname TEXT,\r\n                model TEXT,\r\n                firmware_version TEXT,\r\n                battery_level INTEGER DEFAULT 100,\r\n                connection_status TEXT DEFAULT 'offline',\r\n                last_active DATETIME,\r\n                ip_address TEXT,\r\n                ipv6_address TEXT,\r\n                mac_address TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":5.984306335449219e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.050ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_device_id ON devices (device_id)","params":[],"duration":5.0067901611328125e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_last_active ON devices (last_active)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.044ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_connection_status ON devices (connection_status)","params":[],"duration":4.38690185546875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.041ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_created_at ON devices (created_at)","params":[],"duration":4.100799560546875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.043ms {"query":"CREATE INDEX IF NOT EXISTS idx_devices_model ON devices (model)","params":[],"duration":4.315376281738281e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.058ms {"query":"CREATE TABLE IF NOT EXISTS user_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                nickname TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(user_id, device_id)\r\n            )","params":[],"duration":5.817413330078125e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.059ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_id ON user_devices (user_id)","params":[],"duration":5.888938903808594e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.144ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_device_id ON user_devices (device_id)","params":[],"duration":0.00014400482177734375}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_user_devices_user_device ON user_devices (user_id, device_id)","params":[],"duration":3.4809112548828125e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.044ms {"query":"CREATE TABLE IF NOT EXISTS messages (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                message_id TEXT NOT NULL UNIQUE,\r\n                device_id TEXT NOT NULL,\r\n                sender TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                is_read INTEGER DEFAULT 0,\r\n                status TEXT DEFAULT 'pending',\r\n                scheduled_time DATETIME,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.410743713378906e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.045ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id ON messages (device_id)","params":[],"duration":4.506111145019531e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.047ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_is_read ON messages (is_read)","params":[],"duration":4.696846008300781e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages (created_at)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_created_at ON messages (device_id, created_at DESC)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_messages_device_id_is_read ON messages (device_id, is_read)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.330ms {"query":"CREATE TABLE IF NOT EXISTS firmware_versions (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                version TEXT NOT NULL,\r\n                device_model TEXT,\r\n                file_path TEXT,\r\n                release_notes TEXT,\r\n                is_active INTEGER DEFAULT 0,\r\n                is_forced INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                published_at DATETIME\r\n            )","params":[],"duration":0.0003299713134765625}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_device_model ON firmware_versions (device_model)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_is_active ON firmware_versions (is_active)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_firmware_versions_created_at ON firmware_versions (created_at)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.036ms {"query":"CREATE TABLE IF NOT EXISTS device_groups (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":3.600120544433594e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.056ms {"query":"CREATE TABLE IF NOT EXISTS device_group_devices (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                group_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (group_id) REFERENCES device_groups(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(group_id, device_id)\r\n            )","params":[],"duration":5.5789947509765625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.064ms {"query":"CREATE TABLE IF NOT EXISTS device_tags (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                color TEXT DEFAULT '#3498db',\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":6.413459777832031e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS device_tag_relations (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                tag_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (tag_id) REFERENCES device_tags(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                UNIQUE(tag_id, device_id)\r\n            )","params":[],"duration":5.888938903808594e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.059ms {"query":"CREATE TABLE IF NOT EXISTS message_templates (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'text',\r\n                variables TEXT,\r\n                user_id INTEGER NOT NULL,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":5.91278076171875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_tasks (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                firmware_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                total_devices INTEGER DEFAULT 0,\r\n                completed_devices INTEGER DEFAULT 0,\r\n                failed_devices INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                started_at DATETIME,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (firmware_id) REFERENCES firmware_versions(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.041ms {"query":"CREATE TABLE IF NOT EXISTS firmware_push_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                task_id INTEGER NOT NULL,\r\n                device_id TEXT NOT NULL,\r\n                status TEXT DEFAULT 'pending',\r\n                error_message TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                completed_at DATETIME,\r\n                FOREIGN KEY (task_id) REFERENCES firmware_push_tasks(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.100799560546875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.043ms {"query":"CREATE TABLE IF NOT EXISTS notifications (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                user_id INTEGER NOT NULL,\r\n                title TEXT,\r\n                content TEXT NOT NULL,\r\n                type TEXT DEFAULT 'info',\r\n                is_read INTEGER DEFAULT 0,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n            )","params":[],"duration":4.291534423828125e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE TABLE IF NOT EXISTS system_logs (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                log_level TEXT NOT NULL,\r\n                message TEXT NOT NULL,\r\n                context TEXT,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n            )","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.042ms {"query":"CREATE TABLE IF NOT EXISTS plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                name TEXT NOT NULL,\r\n                description TEXT,\r\n                url TEXT NOT NULL,\r\n                type TEXT DEFAULT 'system', -- system, user, external\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                author TEXT,\r\n                version TEXT DEFAULT '1.0.0',\r\n                refresh_interval TEXT,\r\n                settings_url TEXT,\r\n                created_by INTEGER,\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                approved_by INTEGER,\r\n                approved_at DATETIME,\r\n                approval_status TEXT DEFAULT 'approved', -- pending, approved, rejected\r\n                FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,\r\n                FOREIGN KEY (approved_by) REFERENCES users(id) ON DELETE SET NULL\r\n            )","params":[],"duration":4.220008850097656e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.060ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_type ON plugins (type)","params":[],"duration":6.008148193359375e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.036ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_status ON plugins (status)","params":[],"duration":3.600120544433594e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.054ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_created_by ON plugins (created_by)","params":[],"duration":5.3882598876953125e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_plugins_approval_status ON plugins (approval_status)","params":[],"duration":3.409385681152344e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.051ms {"query":"CREATE TABLE IF NOT EXISTS device_plugins (\r\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                device_id TEXT NOT NULL,\r\n                plugin_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL,\r\n                status TEXT DEFAULT 'enabled', -- enabled, disabled\r\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                FOREIGN KEY (device_id) REFERENCES devices(device_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (plugin_id) REFERENCES plugins(id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\r\n                UNIQUE(device_id, plugin_id, user_id)\r\n            )","params":[],"duration":5.1021575927734375e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_id ON device_plugins (device_id)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_id ON device_plugins (plugin_id)","params":[],"duration":3.3855438232421875e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_user_id ON device_plugins (user_id)","params":[],"duration":3.314018249511719e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.033ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_status ON device_plugins (status)","params":[],"duration":3.2901763916015625e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.035ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_device_user ON device_plugins (device_id, user_id)","params":[],"duration":3.504753112792969e-5}
[2026-01-16 14:45:58.000000] INFO: Query executed in 0.034ms {"query":"CREATE INDEX IF NOT EXISTS idx_device_plugins_plugin_user ON device_plugins (plugin_id, user_id)","params":[],"duration":3.409385681152344e-5}
